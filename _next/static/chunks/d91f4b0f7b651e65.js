(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15125,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={VALID_LOADERS:function(){return o},imageConfigDefault:function(){return s}};for(var a in i)Object.defineProperty(t,a,{enumerable:!0,get:i[a]});let o=["default","imgix","cloudinary","akamai","custom"],s={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},13521,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ImageConfigContext",{enumerable:!0,get:function(){return o}});let i=e.r(41705)._(e.r(91788)),a=e.r(15125),o=i.default.createContext(a.imageConfigDefault)},35580,e=>{"use strict";var r=e.i(50461),t=e.i(91398),i=e.i(91788),a=e.i(3828),o=e.i(44054),s=e.i(36613),n=e.i(50080),l=e.i(77934);function d({productSetId:e,onCompiled:r,existingMarker:a,disabled:o=!1}){let[s,n]=(0,i.useState)({status:"idle",progress:0,message:""}),[d,c]=(0,i.useState)(a?.sourceImageUrl||null),[p,g]=(0,i.useState)(!1),m=(0,i.useRef)(null),x=(0,i.useCallback)(async()=>{if(window.MINDAR?.IMAGE?.Compiler)return void console.log("[NFTMarkerCompiler] Compiler already loaded");if(!document.querySelector('script[src*="mindar-image.prod.js"]')){console.log("[NFTMarkerCompiler] Loading compiler script dynamically...");let e=document.createElement("script");e.src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image.prod.js",e.crossOrigin="anonymous",await new Promise((r,t)=>{e.onload=()=>{console.log("[NFTMarkerCompiler] Compiler script loaded"),r()},e.onerror=()=>t(Error("Failed to load MindAR compiler script")),document.head.appendChild(e)})}},[]),u=(0,i.useCallback)(async()=>{await x();for(let e=0;e<100;e++){if(window.MINDAR?.IMAGE?.Compiler)return console.log("[NFTMarkerCompiler] MindAR compiler available"),window.MINDAR.IMAGE.Compiler;await new Promise(e=>setTimeout(e,100))}throw Error("MindAR compiler failed to load after 10 seconds. Please refresh the page.")},[x]),h=async e=>{try{n({status:"loading",progress:5,message:"loading image..."});let t=URL.createObjectURL(e);c(t);let i=await new Promise((r,t)=>{let i=new Image;i.onload=()=>r(i),i.onerror=t,i.src=URL.createObjectURL(e)});console.log("[NFTMarkerCompiler] Image loaded:",i.width,"x",i.height);let a=await new Promise((r,t)=>{let i=new FileReader;i.onload=()=>{r(i.result.split(",")[1])},i.onerror=t,i.readAsDataURL(e)});console.log("[NFTMarkerCompiler] Source image base64 length:",a.length),n({status:"compiling",progress:10,message:"waiting for compiler to load..."});let o=await u();n({status:"compiling",progress:12,message:"initializing compiler..."});let s=new o;console.log("[NFTMarkerCompiler] Starting compilation..."),await s.compileImageTargets([i],e=>{let r=Math.round(100*e);n({status:"compiling",progress:10+.8*r,message:`compiling .mind file... ${r}%`})}),console.log("[NFTMarkerCompiler] Compilation complete, exporting data..."),n({status:"compiling",progress:92,message:"exporting .mind file..."});let l=await s.exportData();console.log("[NFTMarkerCompiler] Exported data size:",l.byteLength,"bytes");let d=(e=>{let r=new Uint8Array(e),t="";for(let e=0;e<r.byteLength;e++)t+=String.fromCharCode(r[e]);return btoa(t)})(l);console.log("[NFTMarkerCompiler] Mind file base64 length:",d.length);let p=Math.min(100,Math.round(l.byteLength/5e4*100));n({status:"complete",progress:100,message:"marker compiled successfully!"});let g=e.name.replace(/\.[^/.]+$/,"");console.log("[NFTMarkerCompiler] Calling onCompiled with:",{filenameLength:g.length,mindFileDataLength:d.length,sourceImageDataLength:a.length,quality:p}),r({mindFileData:d,sourceImageData:a,filename:g,quality:p})}catch(e){console.error("[NFTMarkerCompiler] Compilation failed:",e),n({status:"error",progress:0,message:e?.message||"compilation failed"})}},f=async e=>{e.type.startsWith("image/")?e.size>0xa00000?n({status:"error",progress:0,message:"file size must be less than 10MB"}):await h(e):n({status:"error",progress:0,message:"please select an image file (png, jpg, etc.)"})},b=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?g(!0):"dragleave"===e.type&&g(!1)},y=()=>{n({status:"idle",progress:0,message:""}),c(a?.sourceImageUrl||null),m.current&&(m.current.value="")},j="loading"===s.status||"compiling"===s.status;return(0,t.jsxs)("div",{className:l.default.nftMarkerCompiler,children:[(0,t.jsx)("h3",{className:l.default.sectionTitle,children:"nft marker"}),(0,t.jsx)("p",{className:l.default.sectionDescription,children:"upload an image to create an ar tracking target. the browser will compile it into a .mind file."}),a&&"idle"===s.status&&(0,t.jsxs)("div",{className:l.default.existingMarkerCard,children:[(0,t.jsx)("div",{className:l.default.existingMarkerPreview,children:(0,t.jsx)("img",{src:a.sourceImageUrl,alt:"current marker"})}),(0,t.jsxs)("div",{className:l.default.existingMarkerInfo,children:[(0,t.jsx)("p",{className:l.default.existingMarkerLabel,children:"current marker"}),(0,t.jsxs)("p",{className:l.default.existingMarkerDate,children:["compiled ",new Date(a.compiledAt).toLocaleDateString()]}),a.quality&&(0,t.jsxs)("p",{className:l.default.existingMarkerQuality,children:["quality: ",a.quality,"%"]})]})]}),(0,t.jsxs)("div",{className:`${l.default.uploadArea} ${p?l.default.dragActive:""} ${o?l.default.disabled:""}`,onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:e=>{if(e.preventDefault(),e.stopPropagation(),g(!1),o||"compiling"===s.status)return;let r=e.dataTransfer.files;r&&r[0]&&f(r[0])},onClick:()=>!o&&!j&&m.current?.click(),children:[(0,t.jsx)("input",{ref:m,type:"file",accept:"image/*",onChange:e=>{let r=e.target.files;r&&r[0]&&f(r[0])},style:{display:"none"},disabled:o||j}),j?(0,t.jsxs)("div",{className:l.default.compilingState,children:[(0,t.jsx)("div",{className:l.default.progressBar,children:(0,t.jsx)("div",{className:l.default.progressFill,style:{width:`${s.progress}%`}})}),(0,t.jsx)("p",{className:l.default.compilingMessage,children:s.message})]}):"complete"===s.status&&d?(0,t.jsxs)("div",{className:l.default.completeState,children:[(0,t.jsx)("div",{className:l.default.previewImage,children:(0,t.jsx)("img",{src:d,alt:"compiled marker"})}),(0,t.jsx)("p",{className:l.default.completeMessage,children:"âœ“ marker compiled successfully"}),(0,t.jsx)("button",{type:"button",className:l.default.resetButton,onClick:e=>{e.stopPropagation(),y()},children:"upload different image"})]}):"error"===s.status?(0,t.jsxs)("div",{className:l.default.errorState,children:[(0,t.jsx)("p",{className:l.default.errorMessage,children:s.message}),(0,t.jsx)("button",{type:"button",className:l.default.retryButton,onClick:e=>{e.stopPropagation(),y()},children:"try again"})]}):(0,t.jsxs)("div",{className:l.default.uploadPrompt,children:[(0,t.jsx)("div",{className:l.default.uploadIcon,children:"ðŸŽ¯"}),(0,t.jsx)("p",{children:"drag & drop an image here or click to browse"}),(0,t.jsx)("p",{className:l.default.uploadHint,children:"png or jpg â€¢ max 10mb â€¢ high contrast recommended"})]})]}),(0,t.jsxs)("div",{className:l.default.markerTips,children:[(0,t.jsx)("h4",{children:"tips for best tracking:"}),(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{children:"use images with high contrast and distinct features"}),(0,t.jsx)("li",{children:"avoid repetitive patterns or solid colors"}),(0,t.jsx)("li",{children:"qr codes and logos work great"}),(0,t.jsx)("li",{children:"minimum recommended size: 300x300px"})]})]})]})}var c=e.i(32750);function p(){let e,p,g,m,{isAuthenticated:x,loading:u}=(0,o.useAdminAuth)(),h=(0,a.useRouter)(),{id:f}=h.query,[b,y]=(0,i.useState)(null),[j,k]=(0,i.useState)([]),[v,w]=(0,i.useState)(null),[S,C]=(0,i.useState)(!0),[R,N]=(0,i.useState)(""),[A,z]=(0,i.useState)(!1),[I,M]=(0,i.useState)(null),[T,P]=(0,i.useState)(!1),[D,B]=(0,i.useState)(null);(0,i.useEffect)(()=>{u||x||h.push("/admin/login")},[x,u,h]),(0,i.useEffect)(()=>{x&&f&&"string"==typeof f&&U(f)},[x,f]);let U=async e=>{try{C(!0),N("");let[r,t]=await Promise.all([(0,s.getProductSet)(e),(0,s.getQRCodes)(e)]);y(r);let i=[];if(Array.isArray(t)?i=t:t?.qrcodes?i=t.qrcodes:t?.qrCodes?i=t.qrCodes:t?.items?i=t.items:t?.data&&(i=Array.isArray(t.data)?t.data:[]),k(i),r.linkedARSessionId)try{let e=await s.arSessions.list(),t=(Array.isArray(e)?e:e?.sessions||e?.arSessions||[]).find(e=>(e.sessionId||e.id)===r.linkedARSessionId);t&&w(t)}catch(e){console.warn("failed to load linked AR session:",e)}}catch(e){console.error("failed to load data:",e),N(e.message||"failed to load product set details")}finally{C(!1)}},L=async e=>{if(confirm("are you sure you want to delete this QR code? this action cannot be undone.")){M(e);try{await (0,s.deleteQRCode)(e),k(r=>r.filter(r=>r.id!==e))}catch(e){console.error("failed to delete QR code:",e),alert("failed to delete QR code. please try again.")}finally{M(null)}}},W=async(e,r)=>{try{let t=document.createElement("a");t.href=e,t.download=r,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}catch(t){try{let t=await fetch(e),i=await t.blob(),a=window.URL.createObjectURL(i),o=document.createElement("a");o.href=a,o.download=r,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a)}catch(r){console.error("failed to download QR code:",r),window.open(e,"_blank")}}},q=async e=>{if(b?.id){console.log("[handleMarkerCompiled] Uploading compiled marker to backend..."),P(!0),B(null);try{let t=`https://us-central1-wmcyn-online-web.cloudfunctions.net/api/v1/productSets/${b.id}/nft-marker`;console.log("[handleMarkerCompiled] Uploading to:",t);let i=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","x-admin-token":r.default.env.NEXT_PUBLIC_ADMIN_API_TOKEN||""},body:JSON.stringify({sourceImageData:e.sourceImageData,mindFileData:e.mindFileData,filename:e.filename,quality:e.quality})});if(!i.ok){let e=await i.text();throw console.error("[handleMarkerCompiled] Upload failed:",{status:i.status,text:e}),Error(`Upload failed: ${i.status} - ${e}`)}let a=await i.json();console.log("[handleMarkerCompiled] Upload result:",a),y(r=>r?{...r,nftMarker:{mindFileUrl:a.mindFileUrl,sourceImageUrl:a.sourceImageUrl,compiledAt:new Date().toISOString(),quality:e.quality}}:null),alert(`âœ“ Marker uploaded successfully!

Mind file: ${a.mindFileUrl}`)}catch(e){console.error("[handleMarkerCompiled] Upload error:",e),B(e.message||"Failed to upload marker")}finally{P(!1)}}},F=e=>e?new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";return u||S?(0,t.jsx)("div",{className:l.default.adminPageContainer,children:(0,t.jsx)("div",{className:l.default.adminContainer,children:(0,t.jsx)("div",{className:l.default.loadingContainer,children:S?"loading product set details...":"loading..."})})}):x?R?(0,t.jsx)("div",{className:l.default.adminPageContainer,children:(0,t.jsxs)("div",{className:l.default.adminContainer,children:[(0,t.jsx)("div",{className:l.default.errorContainer,children:R}),(0,t.jsx)("div",{style:{textAlign:"center",marginTop:"24px"},children:(0,t.jsx)("button",{onClick:()=>h.push("/admin"),className:l.default.buttonSecondary,children:"back to dashboard"})})]})}):b?(0,t.jsx)("div",{className:l.default.adminPageContainer,children:(0,t.jsxs)("div",{className:l.default.adminContainer,children:[(0,t.jsxs)("div",{className:l.default.adminHeader,children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px",flex:1},children:[(0,t.jsx)(c.default,{src:"/wmcyn_logo_white.png",alt:"WMCYN Logo",width:80,height:40,priority:!0}),(0,t.jsx)("h1",{className:l.default.adminTitle,children:"product set details"})]}),(0,t.jsxs)("div",{className:l.default.adminActions,children:[(0,t.jsx)("button",{onClick:()=>z(!0),className:l.default.buttonPrimary,children:"generate QR code"}),(0,t.jsx)("button",{onClick:()=>h.push(`/admin/product-sets/${b.id}`),className:l.default.buttonSecondary,children:"edit"}),(0,t.jsx)("button",{onClick:()=>h.push("/admin"),className:l.default.buttonSecondary,children:"back to dashboard"})]})]}),(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"32px",marginBottom:"32px",backdropFilter:"blur(10px)"},children:[(0,t.jsx)("h2",{style:{color:"white",marginBottom:"16px",fontSize:"1.5rem"},children:b.name}),b.description&&(0,t.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.8)",marginBottom:"16px",lineHeight:"1.5"},children:b.description}),b.campaign&&(0,t.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.7)",marginBottom:"16px"},children:[(0,t.jsx)("strong",{children:"campaign:"})," ",b.campaign]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"20px",marginBottom:"24px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:"white"},children:b.items.reduce((e,r)=>e+(r.quantity||0),0)}),(0,t.jsx)("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.6)"},children:"total items"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:"white"},children:b.stats?.totalClaims||0}),(0,t.jsx)("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.6)"},children:"total claims"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:"white"},children:b.stats?.remainingInventory||0}),(0,t.jsx)("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.6)"},children:"remaining inventory"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"1.2rem",fontWeight:"600",color:"white"},children:(j||[]).length>0?"1":"0"}),(0,t.jsx)("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.6)"},children:"QR code status"})]})]}),(0,t.jsxs)("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.1)",paddingTop:"16px",fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.6)"},children:["created ",F(b.createdAt),b.updatedAt!==b.createdAt&&(0,t.jsxs)("span",{children:[" â€¢ updated ",F(b.updatedAt)]})]})]}),(b.linkedARSessionId||j&&j.length>0)&&(0,t.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.15), rgba(118, 75, 162, 0.15))",border:"1px solid rgba(102, 126, 234, 0.3)",borderRadius:"12px",padding:"24px",marginBottom:"32px",backdropFilter:"blur(10px)"},children:[(0,t.jsxs)("h3",{style:{color:"white",marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("span",{style:{fontSize:"1.3rem"},children:"ðŸŽ¯"}),"test AR experience"]}),(0,t.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",marginBottom:"20px",lineHeight:"1.5"},children:"test your AR marker detection. point your camera at the uploaded marker image to see the 3D WMCYN logo."}),v&&(0,t.jsxs)("div",{style:{marginBottom:"20px",padding:"12px 16px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px"},children:[(0,t.jsx)("div",{style:{color:"#10b981",fontSize:"0.85rem",fontWeight:"500",marginBottom:"4px"},children:"âœ“ linked AR session"}),(0,t.jsxs)("div",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.9rem"},children:[v.metadata?.title||v.name||"AR Session",v.markerPattern?.name&&(0,t.jsxs)("span",{style:{color:"rgba(255, 255, 255, 0.5)",marginLeft:"8px"},children:["â€¢ marker: ",v.markerPattern.name]})]})]}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[j&&j.length>0&&(e=j[0].code,p=`http://localhost:3000/ar/${encodeURIComponent(e)}`,(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"8px",flexWrap:"wrap",gap:"12px"},children:[(0,t.jsxs)("div",{style:{flex:1,minWidth:"200px"},children:[(0,t.jsx)("div",{style:{color:"#10b981",fontSize:"0.8rem",marginBottom:"4px",fontWeight:"500"},children:"âœ“ QR code test link (recommended)"}),(0,t.jsx)("code",{style:{color:"#60a5fa",fontSize:"0.85rem",wordBreak:"break-all",display:"block",padding:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"4px"},children:p})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsxs)("a",{href:`/ar/${encodeURIComponent(e)}`,target:"_blank",rel:"noopener noreferrer",className:l.default.buttonPrimary,style:{fontSize:"0.85rem",padding:"8px 16px",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"6px"},children:[(0,t.jsx)("span",{children:"ðŸš€"})," open AR"]}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(p),alert("URL copied to clipboard!")},className:l.default.buttonSecondary,style:{fontSize:"0.85rem",padding:"8px 12px"},children:"copy"})]})]})),b.linkedARSessionId&&(g=b.linkedARSessionId,m=`http://localhost:3000/ar/${encodeURIComponent(g)}`,(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",flexWrap:"wrap",gap:"12px"},children:[(0,t.jsxs)("div",{style:{flex:1,minWidth:"200px"},children:[(0,t.jsx)("div",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.8rem",marginBottom:"4px"},children:"AR session link (dev)"}),(0,t.jsx)("code",{style:{color:"#60a5fa",fontSize:"0.85rem",wordBreak:"break-all",display:"block",padding:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"4px"},children:m})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,t.jsxs)("a",{href:`/ar/${encodeURIComponent(g)}`,target:"_blank",rel:"noopener noreferrer",className:l.default.buttonPrimary,style:{fontSize:"0.85rem",padding:"8px 16px",textDecoration:"none",display:"inline-flex",alignItems:"center",gap:"6px"},children:[(0,t.jsx)("span",{children:"ðŸš€"})," open AR"]}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(m),alert("URL copied to clipboard!")},className:l.default.buttonSecondary,style:{fontSize:"0.85rem",padding:"8px 12px"},children:"copy"})]})]}))]}),(0,t.jsxs)("div",{style:{marginTop:"20px",padding:"16px",background:"rgba(251, 191, 36, 0.1)",border:"1px solid rgba(251, 191, 36, 0.3)",borderRadius:"8px"},children:[(0,t.jsxs)("div",{style:{color:"#fbbf24",fontSize:"0.85rem",fontWeight:"500",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[(0,t.jsx)("span",{children:"ðŸ’¡"})," testing tips"]}),(0,t.jsxs)("ul",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.85rem",margin:0,paddingLeft:"20px",lineHeight:"1.6"},children:[(0,t.jsx)("li",{children:"open the AR link on your phone or use chrome devtools mobile emulator"}),(0,t.jsx)("li",{children:"allow camera access when prompted"}),(0,t.jsx)("li",{children:"point camera at the marker image you uploaded"}),(0,t.jsx)("li",{children:"the 3D WMCYN logo should appear when marker is detected"})]})]})]}),(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"24px",marginBottom:"32px",backdropFilter:"blur(10px)"},children:[(0,t.jsx)("h3",{style:{color:"white",marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600",textAlign:"center"},children:"items"}),b.items&&b.items.length>0?(0,t.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:b.items.map((e,r)=>(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",gap:"16px"},children:[(0,t.jsx)("span",{style:{color:"white",fontWeight:"500",fontSize:"1rem",flex:1},children:e.productId}),(0,t.jsxs)("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem",fontWeight:"500",minWidth:"80px",textAlign:"right"},children:["qty: ",e.quantity||0]})]},r))}):(0,t.jsxs)("div",{style:{textAlign:"center",padding:"32px 24px",color:"rgba(255, 255, 255, 0.6)",background:"rgba(255, 255, 255, 0.02)",border:"1px dashed rgba(255, 255, 255, 0.2)",borderRadius:"8px"},children:[(0,t.jsx)("div",{style:{fontSize:"1.5rem",marginBottom:"12px",opacity:.5},children:"ðŸ“¦"}),(0,t.jsx)("p",{style:{margin:"0",fontSize:"0.9rem"},children:"no items configured"})]})]}),(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"24px",marginBottom:"32px",backdropFilter:"blur(10px)"},children:[(0,t.jsx)("h3",{style:{color:"white",marginBottom:"16px",fontSize:"1.1rem",fontWeight:"600"},children:"checkout configuration"}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px"},children:[(0,t.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem"},children:"type:"}),(0,t.jsx)("span",{style:{color:"white",fontWeight:"500"},children:b.checkout?.type||"N/A"})]}),b.checkout?.cartLink&&(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px"},children:[(0,t.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem"},children:"cart link:"}),(0,t.jsx)("a",{href:b.checkout?.cartLink,target:"_blank",rel:"noopener noreferrer",style:{color:"#667eea",textDecoration:"none",fontSize:"0.9rem",fontWeight:"500",padding:"4px 8px",borderRadius:"4px",background:"rgba(102, 126, 234, 0.1)",border:"1px solid rgba(102, 126, 234, 0.2)",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(102, 126, 234, 0.2)",e.currentTarget.style.borderColor="rgba(102, 126, 234, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(102, 126, 234, 0.1)",e.currentTarget.style.borderColor="rgba(102, 126, 234, 0.2)"},children:"view link"})]}),b.checkout?.discountCode&&(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px"},children:[(0,t.jsx)("span",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"0.9rem"},children:"discount code:"}),(0,t.jsx)("span",{style:{color:"white",fontWeight:"500"},children:b.checkout?.discountCode})]})]})]}),(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"24px",marginBottom:"32px",backdropFilter:"blur(10px)"},children:[D&&(0,t.jsx)("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#fca5a5",fontSize:"0.9rem"},children:D}),T&&(0,t.jsx)("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",color:"#93c5fd",fontSize:"0.9rem",textAlign:"center"},children:"uploading marker to server..."}),(0,t.jsx)(d,{productSetId:b.id,onCompiled:q,existingMarker:b.nftMarker,disabled:T})]}),(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"24px",backdropFilter:"blur(10px)"},children:[(0,t.jsxs)("div",{style:{marginBottom:"20px",textAlign:"center"},children:[(0,t.jsx)("h3",{style:{color:"white",margin:"0 0 16px 0",fontSize:"1.1rem",fontWeight:"600"},children:"QR code"}),0===(j||[]).length&&(0,t.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:(0,t.jsx)("button",{onClick:()=>z(!0),className:l.default.buttonPrimary,style:{fontSize:"0.9rem",padding:"10px 16px"},children:"generate QR code"})})]}),(j||[]).length>0?(0,t.jsx)("div",{children:(j||[]).slice(0,1).map(e=>{let r,i;return console.log("[ProductSetDetails] Rendering QR code:",e),(0,t.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"16px"},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{color:"white",fontWeight:"500",marginBottom:"4px"},children:e.code}),(0,t.jsxs)("div",{style:{fontSize:"0.9rem",color:"rgba(255, 255, 255, 0.6)"},children:["created ",F(e.createdAt)]})]}),(0,t.jsx)("button",{onClick:()=>L(e.id),disabled:I===e.id,className:l.default.buttonDanger,style:{padding:"6px 12px",fontSize:"0.8rem",opacity:I===e.id?.6:1},children:I===e.id?"deleting...":"delete"})]}),(r=e.assets?.qrPngUrl||`https://api-rrm3u3yaba-uc.a.run.app/api/qr-assets/${e.code}.png`,i=e.assets?.qrSvgUrl||`https://api-rrm3u3yaba-uc.a.run.app/api/qr-assets/${e.code}.svg`,(0,t.jsxs)("div",{style:{textAlign:"center",marginBottom:"16px",padding:"16px",background:"white",borderRadius:"8px"},children:[(0,t.jsx)("img",{src:r,alt:`QR Code ${e.code}`,onError:e=>{e.currentTarget.src!==i&&(e.currentTarget.src=i)},style:{maxWidth:"200px",width:"100%",height:"auto",display:"block",margin:"0 auto"}}),(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"center",marginTop:"12px"},children:[(0,t.jsx)("button",{onClick:()=>W(r,`qr-code-${e.code}.png`),style:{padding:"8px 16px",background:"#000",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500"},children:"download png"}),(0,t.jsx)("button",{onClick:()=>W(i,`qr-code-${e.code}.svg`),style:{padding:"8px 16px",background:"#000",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500"},children:"download svg"})]})]})),(0,t.jsxs)("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(255, 255, 255, 0.05)",borderRadius:"6px"},children:[(0,t.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.6)",marginBottom:"4px"},children:"QR code URL:"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,t.jsx)("code",{style:{flex:1,padding:"6px 8px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"4px",color:"#60a5fa",fontSize:"0.85rem",wordBreak:"break-all",overflow:"hidden",textOverflow:"ellipsis"},children:`https://wmcyn.online/qr?code=${e.code}`}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(`https://wmcyn.online/qr?code=${e.code}`),alert("URL copied to clipboard!")},style:{padding:"6px 12px",background:"rgba(255, 255, 255, 0.1)",color:"white",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",whiteSpace:"nowrap"},children:"copy"})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:"16px"},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"1rem",fontWeight:"600",color:"white"},children:e.stats?.claimsUsed||0}),(0,t.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.6)"},children:"claims used"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{style:{fontSize:"1rem",fontWeight:"600",color:"white"},children:e.stats?.remainingClaims||0}),(0,t.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.6)"},children:"remaining"})]})]}),(0,t.jsx)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 255, 255, 0.7)",lineHeight:"1.4"},children:(e=>{let r=[];if(e.geofence&&r.push(`location: ${e.geofence.latitude.toFixed(4)}, ${e.geofence.longitude.toFixed(4)} (\xb1${e.geofence.radiusMeters}m)`),e.timeWindow){let t=new Date(e.timeWindow.startTime).toLocaleDateString(),i=new Date(e.timeWindow.endTime).toLocaleDateString();r.push(`time: ${t} - ${i}`)}return r.push(`per user: ${e.perUserLimit}`),r.push(`max claims: ${e.maxClaims}`),r.join(" â€¢ ")})(e.redeemPolicy||{})}),e.expiresAt&&(0,t.jsxs)("div",{style:{fontSize:"0.8rem",color:"rgba(255, 107, 107, 0.8)",marginTop:"8px"},children:["expires: ",F(e.expiresAt)]})]},e.id)})}):(0,t.jsxs)("div",{style:{textAlign:"center",padding:"48px 32px",color:"rgba(255, 255, 255, 0.6)",background:"rgba(255, 255, 255, 0.02)",border:"1px dashed rgba(255, 255, 255, 0.2)",borderRadius:"12px"},children:[(0,t.jsx)("div",{style:{fontSize:"2rem",marginBottom:"16px",opacity:.5},children:"ðŸ“±"}),(0,t.jsx)("p",{style:{marginBottom:"0",fontSize:"1rem"},children:"no QR code generated yet"})]})]}),(0,t.jsx)(n.default,{productSet:b,isOpen:A,onClose:()=>z(!1),onSuccess:e=>{console.log("[handleQRSuccess] QR code generated:",e),e?.qrCode&&k(r=>r.some(r=>r.id===e.qrCode.id||r.code===e.qrCode.code)?r:[...r,e.qrCode]),f&&"string"==typeof f&&setTimeout(()=>{(0,s.getQRCodes)(f).then(e=>{console.log("[handleQRSuccess] API refresh response:",e),e?.qrCodes&&e.qrCodes.length>0&&k(e.qrCodes)}).catch(console.error)},1e3)}})]})}):(0,t.jsx)("div",{className:l.default.adminPageContainer,children:(0,t.jsx)("div",{className:l.default.adminContainer,children:(0,t.jsxs)("div",{className:l.default.emptyState,children:[(0,t.jsx)("h2",{className:l.default.emptyStateTitle,children:"product set not found"}),(0,t.jsx)("p",{className:l.default.emptyStateDescription,children:"the product set you're looking for doesn't exist or has been deleted"}),(0,t.jsx)("button",{onClick:()=>h.push("/admin"),className:l.default.buttonPrimary,children:"back to dashboard"})]})})}):null}e.s(["default",()=>p],35580)},44058,(e,r,t)=>{let i="/admin/product-sets/[id]/details";(window.__NEXT_P=window.__NEXT_P||[]).push([i,()=>e.r(35580)]),r.hot&&r.hot.dispose(function(){window.__NEXT_P.push([i])})},48761,e=>{e.v(r=>Promise.all(["static/chunks/fd7c0943d5cd5e09.js"].map(r=>e.l(r))).then(()=>r(93594)))},28805,e=>{e.v(r=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(r=>e.l(r))).then(()=>r(79466)))}]);