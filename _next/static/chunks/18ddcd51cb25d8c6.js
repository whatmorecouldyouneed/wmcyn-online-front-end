(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25479,(t,e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"RouterContext",{enumerable:!0,get:function(){return i}});let i=t.r(41705)._(t.r(91788)).default.createContext(null)},89129,(t,e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={DecodeError:function(){return _},MiddlewareNotFoundError:function(){return E},MissingStaticPage:function(){return v},NormalizeError:function(){return g},PageNotFoundError:function(){return b},SP:function(){return m},ST:function(){return y},WEB_VITALS:function(){return r},execOnce:function(){return s},getDisplayName:function(){return h},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return d},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return S}};for(var o in i)Object.defineProperty(n,o,{enumerable:!0,get:i[o]});let r=["CLS","FCP","FID","INP","LCP","TTFB"];function s(t){let e,n=!1;return(...i)=>(n||(n=!0,e=t(...i)),e)}let a=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=t=>a.test(t);function c(){let{protocol:t,hostname:e,port:n}=window.location;return`${t}//${e}${n?":"+n:""}`}function u(){let{href:t}=window.location,e=c();return t.substring(e.length)}function h(t){return"string"==typeof t?t:t.displayName||t.name||"Unknown"}function d(t){return t.finished||t.headersSent}function p(t){let e=t.split("?");return e[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(e[1]?`?${e.slice(1).join("?")}`:"")}async function f(t,e){let n=e.res||e.ctx&&e.ctx.res;if(!t.getInitialProps)return e.ctx&&e.Component?{pageProps:await f(e.Component,e.ctx)}:{};let i=await t.getInitialProps(e);if(n&&d(n))return i;if(!i)throw Object.defineProperty(Error(`"${h(t)}.getInitialProps()" should resolve to an object. But found "${i}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i}let m="undefined"!=typeof performance,y=m&&["mark","measure","getEntriesByName"].every(t=>"function"==typeof performance[t]);class _ extends Error{}class g extends Error{}class b extends Error{constructor(t){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${t}`}}class v extends Error{constructor(t,e){super(),this.message=`Failed to load static file for page: ${t} ${e}`}}class E extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function S(t){return JSON.stringify({message:t.message,stack:t.stack})}},20955,(t,e,n)=>{var i={229:function(t){var e,n,i,o=t.exports={};function r(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}try{e="function"==typeof setTimeout?setTimeout:r}catch(t){e=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}function a(t){if(e===setTimeout)return setTimeout(t,0);if((e===r||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}var l=[],c=!1,u=-1;function h(){c&&i&&(c=!1,i.length?l=i.concat(l):u=-1,l.length&&d())}function d(){if(!c){var t=a(h);c=!0;for(var e=l.length;e;){for(i=l,l=[];++u<e;)i&&i[u].run();u=-1,e=l.length}i=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.prependListener=f,o.prependOnceListener=f,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={exports:{}},s=!0;try{i[t](n,n.exports,r),s=!1}finally{s&&delete o[t]}return n.exports}r.ab="/ROOT/node_modules/next/dist/compiled/process/",e.exports=r(229)},50461,(t,e,n)=>{"use strict";var i,o;e.exports=(null==(i=t.g.process)?void 0:i.env)&&"object"==typeof(null==(o=t.g.process)?void 0:o.env)?t.g.process:t.r(20955)},8481,(t,e,n)=>{"use strict";var i=Symbol.for("react.transitional.element");function o(t,e,n){var o=null;if(void 0!==n&&(o=""+n),void 0!==e.key&&(o=""+e.key),"key"in e)for(var r in n={},e)"key"!==r&&(n[r]=e[r]);else n=e;return{$$typeof:i,type:t,key:o,ref:void 0!==(e=n.ref)?e:null,props:n}}n.Fragment=Symbol.for("react.fragment"),n.jsx=o,n.jsxs=o},91398,(t,e,n)=>{"use strict";e.exports=t.r(8481)},61556,(t,e,n)=>{"use strict";var i=t.i(50461),o=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),y=Symbol.iterator,_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,b={};function v(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||_}function E(){}function S(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||_}v.prototype.isReactComponent={},v.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},v.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},E.prototype=v.prototype;var w=S.prototype=new E;w.constructor=S,g(w,v.prototype),w.isPureReactComponent=!0;var P=Array.isArray;function k(){}var T={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function C(t,e,n){var i=n.ref;return{$$typeof:o,type:t,key:e,ref:void 0!==i?i:null,props:n}}function D(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var O=/\/+/g;function R(t,e){var n,i;return"object"==typeof t&&null!==t&&null!=t.key?(n=""+t.key,i={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(t){return i[t]})):e.toString(36)}function j(t,e,n){if(null==t)return t;var i=[],s=0;return!function t(e,n,i,s,a){var l,c,u,h=typeof e;("undefined"===h||"boolean"===h)&&(e=null);var d=!1;if(null===e)d=!0;else switch(h){case"bigint":case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case o:case r:d=!0;break;case f:return t((d=e._init)(e._payload),n,i,s,a)}}if(d)return a=a(e),d=""===s?"."+R(e,0):s,P(a)?(i="",null!=d&&(i=d.replace(O,"$&/")+"/"),t(a,n,i,"",function(t){return t})):null!=a&&(D(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(O,"$&/")+"/")+d,a=C(l.type,c,l.props)),n.push(a)),1;d=0;var p=""===s?".":s+":";if(P(e))for(var m=0;m<e.length;m++)h=p+R(s=e[m],m),d+=t(s,n,i,h,a);else if("function"==typeof(m=null===(u=e)||"object"!=typeof u?null:"function"==typeof(u=y&&u[y]||u["@@iterator"])?u:null))for(e=m.call(e),m=0;!(s=e.next()).done;)h=p+R(s=s.value,m++),d+=t(s,n,i,h,a);else if("object"===h){if("function"==typeof e.then)return t(function(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch("string"==typeof t.status?t.then(k,k):(t.status="pending",t.then(function(e){"pending"===t.status&&(t.status="fulfilled",t.value=e)},function(e){"pending"===t.status&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}(e),n,i,s,a);throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(n=String(e))?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.")}return d}(t,i,"","",function(t){return e.call(n,t,s++)}),i}function A(t){if(-1===t._status){var e=t._result;(e=e()).then(function(e){(0===t._status||-1===t._status)&&(t._status=1,t._result=e)},function(e){(0===t._status||-1===t._status)&&(t._status=2,t._result=e)}),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var M="function"==typeof reportError?reportError:function(t){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof t&&null!==t&&"string"==typeof t.message?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if("object"==typeof i.default&&"function"==typeof i.default.emit)return void i.default.emit("uncaughtException",t);console.error(t)};n.Activity=m,n.Children={map:j,forEach:function(t,e,n){j(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return j(t,function(){e++}),e},toArray:function(t){return j(t,function(t){return t})||[]},only:function(t){if(!D(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},n.Component=v,n.Fragment=s,n.Profiler=l,n.PureComponent=S,n.StrictMode=a,n.Suspense=d,n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,n.__COMPILER_RUNTIME={__proto__:null,c:function(t){return T.H.useMemoCache(t)}},n.cache=function(t){return function(){return t.apply(null,arguments)}},n.cacheSignal=function(){return null},n.cloneElement=function(t,e,n){if(null==t)throw Error("The argument must be a React element, but you passed "+t+".");var i=g({},t.props),o=t.key;if(null!=e)for(r in void 0!==e.key&&(o=""+e.key),e)x.call(e,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&("ref"!==r||void 0!==e.ref)&&(i[r]=e[r]);var r=arguments.length-2;if(1===r)i.children=n;else if(1<r){for(var s=Array(r),a=0;a<r;a++)s[a]=arguments[a+2];i.children=s}return C(t.type,o,i)},n.createContext=function(t){return(t={$$typeof:u,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider=t,t.Consumer={$$typeof:c,_context:t},t},n.createElement=function(t,e,n){var i,o={},r=null;if(null!=e)for(i in void 0!==e.key&&(r=""+e.key),e)x.call(e,i)&&"key"!==i&&"__self"!==i&&"__source"!==i&&(o[i]=e[i]);var s=arguments.length-2;if(1===s)o.children=n;else if(1<s){for(var a=Array(s),l=0;l<s;l++)a[l]=arguments[l+2];o.children=a}if(t&&t.defaultProps)for(i in s=t.defaultProps)void 0===o[i]&&(o[i]=s[i]);return C(t,r,o)},n.createRef=function(){return{current:null}},n.forwardRef=function(t){return{$$typeof:h,render:t}},n.isValidElement=D,n.lazy=function(t){return{$$typeof:f,_payload:{_status:-1,_result:t},_init:A}},n.memo=function(t,e){return{$$typeof:p,type:t,compare:void 0===e?null:e}},n.startTransition=function(t){var e=T.T,n={};T.T=n;try{var i=t(),o=T.S;null!==o&&o(n,i),"object"==typeof i&&null!==i&&"function"==typeof i.then&&i.then(k,M)}catch(t){M(t)}finally{null!==e&&null!==n.types&&(e.types=n.types),T.T=e}},n.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},n.use=function(t){return T.H.use(t)},n.useActionState=function(t,e,n){return T.H.useActionState(t,e,n)},n.useCallback=function(t,e){return T.H.useCallback(t,e)},n.useContext=function(t){return T.H.useContext(t)},n.useDebugValue=function(){},n.useDeferredValue=function(t,e){return T.H.useDeferredValue(t,e)},n.useEffect=function(t,e){return T.H.useEffect(t,e)},n.useEffectEvent=function(t){return T.H.useEffectEvent(t)},n.useId=function(){return T.H.useId()},n.useImperativeHandle=function(t,e,n){return T.H.useImperativeHandle(t,e,n)},n.useInsertionEffect=function(t,e){return T.H.useInsertionEffect(t,e)},n.useLayoutEffect=function(t,e){return T.H.useLayoutEffect(t,e)},n.useMemo=function(t,e){return T.H.useMemo(t,e)},n.useOptimistic=function(t,e){return T.H.useOptimistic(t,e)},n.useReducer=function(t,e,n){return T.H.useReducer(t,e,n)},n.useRef=function(t){return T.H.useRef(t)},n.useState=function(t){return T.H.useState(t)},n.useSyncExternalStore=function(t,e,n){return T.H.useSyncExternalStore(t,e,n)},n.useTransition=function(){return T.H.useTransition()},n.version="19.2.3"},91788,(t,e,n)=>{"use strict";e.exports=t.r(61556)},41705,(t,e,n)=>{"use strict";n._=function(t){return t&&t.__esModule?t:{default:t}}},52456,(t,e,n)=>{"use strict";function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}n._=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var o={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var a=r?Object.getOwnPropertyDescriptor(t,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=t[s]}return o.default=t,n&&n.set(t,o),o}},13584,(t,e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"HeadManagerContext",{enumerable:!0,get:function(){return i}});let i=t.r(41705)._(t.r(91788)).default.createContext({})},94470,(t,e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"warnOnce",{enumerable:!0,get:function(){return i}});let i=t=>{}},17431,(t,e,n)=>{"use strict";var i=t.r(91788);function o(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(o(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal"),l=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(t,e){return"font"===t?"":"string"==typeof e?"use-credentials"===e?e:"":void 0}n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,n.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)throw Error(o(299));return function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},n.flushSync=function(t){var e=l.T,n=s.p;try{if(l.T=null,s.p=2,t)return t()}finally{l.T=e,s.p=n,s.d.f()}},n.preconnect=function(t,e){"string"==typeof t&&(e=e?"string"==typeof(e=e.crossOrigin)?"use-credentials"===e?e:"":void 0:null,s.d.C(t,e))},n.prefetchDNS=function(t){"string"==typeof t&&s.d.D(t)},n.preinit=function(t,e){if("string"==typeof t&&e&&"string"==typeof e.as){var n=e.as,i=c(n,e.crossOrigin),o="string"==typeof e.integrity?e.integrity:void 0,r="string"==typeof e.fetchPriority?e.fetchPriority:void 0;"style"===n?s.d.S(t,"string"==typeof e.precedence?e.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:r}):"script"===n&&s.d.X(t,{crossOrigin:i,integrity:o,fetchPriority:r,nonce:"string"==typeof e.nonce?e.nonce:void 0})}},n.preinitModule=function(t,e){if("string"==typeof t)if("object"==typeof e&&null!==e){if(null==e.as||"script"===e.as){var n=c(e.as,e.crossOrigin);s.d.M(t,{crossOrigin:n,integrity:"string"==typeof e.integrity?e.integrity:void 0,nonce:"string"==typeof e.nonce?e.nonce:void 0})}}else null==e&&s.d.M(t)},n.preload=function(t,e){if("string"==typeof t&&"object"==typeof e&&null!==e&&"string"==typeof e.as){var n=e.as,i=c(n,e.crossOrigin);s.d.L(t,n,{crossOrigin:i,integrity:"string"==typeof e.integrity?e.integrity:void 0,nonce:"string"==typeof e.nonce?e.nonce:void 0,type:"string"==typeof e.type?e.type:void 0,fetchPriority:"string"==typeof e.fetchPriority?e.fetchPriority:void 0,referrerPolicy:"string"==typeof e.referrerPolicy?e.referrerPolicy:void 0,imageSrcSet:"string"==typeof e.imageSrcSet?e.imageSrcSet:void 0,imageSizes:"string"==typeof e.imageSizes?e.imageSizes:void 0,media:"string"==typeof e.media?e.media:void 0})}},n.preloadModule=function(t,e){if("string"==typeof t)if(e){var n=c(e.as,e.crossOrigin);s.d.m(t,{as:"string"==typeof e.as&&"script"!==e.as?e.as:void 0,crossOrigin:n,integrity:"string"==typeof e.integrity?e.integrity:void 0})}else s.d.m(t)},n.requestFormReset=function(t){s.d.r(t)},n.unstable_batchedUpdates=function(t,e){return t(e)},n.useFormState=function(t,e,n){return l.H.useFormState(t,e,n)},n.useFormStatus=function(){return l.H.useHostTransitionStatus()},n.version="19.2.3"},30943,(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),e.exports=t.r(17431)},20262,(t,e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={getDeploymentId:function(){return r},getDeploymentIdQueryOrEmptyString:function(){return s}};for(var o in i)Object.defineProperty(n,o,{enumerable:!0,get:i[o]});function r(){return!1}function s(){return""}},3828,(t,e,n)=>{e.exports=t.r(26990)},36613,t=>{"use strict";var e=t.i(50461),n=t.i(48559);let i="https://us-central1-wmcyn-online-web.cloudfunctions.net/api",o=e.default.env.NEXT_PUBLIC_DEV_X_UID,r=e.default.env.NEXT_PUBLIC_ADMIN_API_TOKEN;async function s(){if(!n.auth?.currentUser)return console.warn("[apiClient] No currentUser - user not signed in"),null;try{let t=await n.auth.currentUser.getIdToken();return console.log("[apiClient] Got Firebase token:",t?"present":"missing"),console.log("[apiClient] User UID:",n.auth.currentUser.uid),console.log("[apiClient] User is anonymous:",n.auth.currentUser.isAnonymous),console.log("[apiClient] Token preview:",t?t.substring(0,20)+"...":"null"),t}catch(t){return console.error("[apiClient] Failed to get Firebase token:",t),null}}async function a(t,e={}){let r=new Headers(e.headers||{});r.set("content-type","application/json");let l=await s();l?r.set("authorization",`Bearer ${l}`):o&&r.set("x-uid",o);let c=async()=>fetch(`${i}${t}`,{...e,headers:r,cache:"no-store"}),u=await c();if(401===u.status&&n.auth?.currentUser)try{let t=await n.auth.currentUser.getIdToken(!0);t&&(r.set("authorization",`Bearer ${t}`),r.delete("x-uid"),u=await c())}catch(t){console.warn("[apiClient] Token refresh failed:",t)}if(401===u.status&&o&&(r.delete("authorization"),r.set("x-uid",o),u=await c()),!u.ok){let t=await u.text().catch(()=>"");if(console.error("[apiClient] Request failed:",u.status,t),404===u.status)throw Error("Resource not found");if(401===u.status)throw Error("Unauthorized");if(403===u.status)throw Error("Forbidden");else if(503===u.status)throw Error("Backend service unavailable - the Cloud Function may be cold-starting or not deployed. Please try again in a few moments.");else if(u.status>=500)throw Error("Server error");else throw Error(t.replace(/<[^>]*>/g,"").trim()||`Request failed with status ${u.status}`)}return await u.json().catch(()=>({}))}async function l(t,e={}){let a=new Headers(e.headers||{});a.set("content-type","application/json");let c=await s();console.log("[adminApiClient] Processing path:",t),t.includes("/marker-patterns")||t.includes("/ar-sessions")?r?(a.set("x-admin-token",r),console.log("[adminApiClient] Using admin API token for admin endpoint request to:",t)):(console.warn("[adminApiClient] Admin API token not available for admin endpoint request"),c&&n.auth?.currentUser&&(a.set("authorization",`Bearer ${c}`),a.set("x-uid",n.auth.currentUser.uid),console.log("[adminApiClient] Falling back to Firebase token for admin endpoint request"))):t.includes("/productSets")?r?(a.set("x-admin-token",r),console.log("[adminApiClient] Using admin API token for product sets request to:",t)):c&&n.auth?.currentUser?(a.set("authorization",`Bearer ${c}`),a.set("x-uid",n.auth.currentUser.uid),console.log("[adminApiClient] Using Firebase token for product sets request to:",t),console.log("[adminApiClient] User UID:",n.auth.currentUser.uid)):console.warn("[adminApiClient] No authentication available for product sets request"):t.includes("/qrcodes")||t.includes("qrcodes")?(console.log("[adminApiClient] QR codes path detected:",t),r?(a.set("x-admin-token",r),console.log("[adminApiClient] Using x-admin-token for QR codes request to:",t)):c&&n.auth?.currentUser?(a.set("authorization",`Bearer ${c}`),a.set("x-uid",n.auth.currentUser.uid),console.log("[adminApiClient] Using Firebase token for QR codes request to:",t),console.log("[adminApiClient] User UID:",n.auth.currentUser.uid)):console.warn("[adminApiClient] No authentication available for QR codes request")):c&&n.auth?.currentUser?(a.set("authorization",`Bearer ${c}`),a.set("x-uid",n.auth.currentUser.uid),console.log("[adminApiClient] Using Firebase token for request to:",t),console.log("[adminApiClient] User UID:",n.auth.currentUser.uid)):r?(a.set("x-admin-token",r),console.log("[adminApiClient] Using admin API token for request to:",t)):o?(a.set("x-uid",o),console.log("[adminApiClient] Using dev x-uid for request to:",t)):console.warn("[adminApiClient] No authentication available for request to:",t);let u=async()=>(console.log("[adminApiClient] Making request to:",`${i}${t}`),console.log("[adminApiClient] Headers being sent:",{"x-admin-token":a.get("x-admin-token")?"present":"missing","x-cron-key":a.get("x-cron-key")?"present":"missing",authorization:a.get("authorization")?"present":"missing","x-uid":a.get("x-uid")?"present":"missing"}),fetch(`${i}${t}`,{...e,headers:a,cache:"no-store"})),h=await u();if(401===h.status&&n.auth?.currentUser&&!a.get("x-admin-token")){console.log("[adminApiClient] Got 401, attempting token refresh...");try{let t=await n.auth.currentUser.getIdToken(!0);t&&(a.set("authorization",`Bearer ${t}`),a.set("x-uid",n.auth.currentUser.uid),console.log("[adminApiClient] Retrying with fresh token..."),h=await u())}catch(t){console.warn("[adminApiClient] Token refresh failed:",t)}}if(401===h.status&&r&&(console.log("[adminApiClient] Still 401, trying admin API token fallback..."),a.delete("authorization"),a.delete("x-uid"),a.set("x-admin-token",r),console.log("[adminApiClient] Trying admin token as x-admin-token..."),401===(h=await u()).status&&(console.log("[adminApiClient] Still 401, trying admin token as x-cron-key..."),a.delete("x-admin-token"),a.set("x-cron-key",r),h=await u()),401===h.status&&(console.log("[adminApiClient] Still 401, trying admin token as Bearer..."),a.delete("x-cron-key"),a.set("authorization",`Bearer ${r}`),h=await u())),401===h.status&&o&&(console.log("[adminApiClient] Still 401, trying dev x-uid fallback..."),a.delete("authorization"),a.delete("x-admin-token"),a.set("x-uid",o),h=await u()),!h.ok){let e=await h.text().catch(()=>"");if(console.error("[adminApiClient] Request failed:",{status:h.status,statusText:h.statusText,url:`${i}${t}`,responseText:e,hasAuth:!!a.get("authorization"),hasAdminToken:!!a.get("x-admin-token"),hasCronKey:!!a.get("x-cron-key"),hasXUid:!!a.get("x-uid")}),401===h.status)if(e.includes("invalid token"))throw Error("Authentication failed - token may be invalid or backend not updated");else if(e.includes("Forbidden"))throw Error("Access denied - admin privileges required");else throw Error("Authentication required - check if backend supports the authentication method");if(404===h.status)throw Error("Resource not found");if(403===h.status)throw Error("Forbidden");else if(503===h.status)throw Error("Backend service unavailable - the Cloud Function may be cold-starting or not deployed. Please try again in a few moments.");else if(h.status>=500){let t=e.replace(/<[^>]*>/g,"").trim(),n=t?`: ${t.substring(0,300)}`:" - check backend logs for details";throw Error(`Server error (${h.status})${n}`)}else throw Error(e.replace(/<[^>]*>/g,"").trim()||`Admin request failed with status ${h.status}`)}return await h.json().catch(()=>({}))}let c=async()=>{let t=await l("/v1/productSets");return console.log("[getProductSets] Raw response:",t),t},u=async t=>{let e=t.items.map(t=>{let e={productId:t.productId||"default-product",qty:t.quantity||t.qty||1};return t.variantId&&(e.variantId=t.variantId),t.maxPerUser&&(e.maxPerUser=t.maxPerUser),e}),n={name:t.name,items:e};t.description&&(n.description=t.description),t.campaign&&(n.campaign=t.campaign),t.checkout&&(n.checkout={type:t.checkout.type||"product"},t.checkout.cartLink&&(n.checkout.cartLink=t.checkout.cartLink),t.checkout.discountCode&&(n.checkout.discountCode=t.checkout.discountCode)),void 0!==t.remainingInventory&&(n.remainingInventory=t.remainingInventory),t.linkedARSessionId&&(n.linkedARSessionId=t.linkedARSessionId),console.log("[createProductSet] Sending clean data:",JSON.stringify(n,null,2));try{return await l("/v1/productSets/create",{method:"POST",body:JSON.stringify(n)})}catch(t){return console.log("[createProductSet] /create endpoint failed, trying POST /productSets:",t.message),l("/v1/productSets",{method:"POST",body:JSON.stringify(n)})}},h=async t=>{console.log("[deleteProductSet] Attempting to delete:",t);try{return await l(`/v1/productSets/${t}`,{method:"DELETE"})}catch(e){if("Resource not found"===e.message){console.log("[deleteProductSet] DELETE method failed, trying POST /delete");try{return await l(`/v1/productSets/${t}/delete`,{method:"POST"})}catch(e){return console.log("[deleteProductSet] POST /delete also failed, trying DELETE /delete"),await l(`/v1/productSets/delete/${t}`,{method:"DELETE"})}}throw e}},d=async t=>{let e=await fetch(`${i}/v1/qrcodes/${encodeURIComponent(t)}/ar-config`,{method:"GET",credentials:"omit"});if(!e.ok)throw Error(`ar-config ${e.status}`);return e.json()};t.s(["arSessions",0,{get:async t=>a(`/v1/ar-sessions/${t}/data`),list:async t=>{let e=new URLSearchParams(t),n=await l(`/v1/ar-sessions?${e}`);return console.log("[arSessions.list] Raw response:",n),n},create:async t=>l("/v1/ar-sessions",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>l(`/v1/ar-sessions/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>l(`/v1/ar-sessions/${t}`,{method:"DELETE"})},"createProductSet",0,u,"deleteProductSet",0,h,"deleteQRCode",0,t=>l(`/v1/qrcodes/${t}`,{method:"DELETE"}),"fetchArConfigByCode",0,d,"generateQRCode",0,t=>l("/v1/qrcodes/generate",{method:"POST",body:JSON.stringify(t)}),"getInventory",0,(t=!1)=>a(`/v1/profile/inventory${t?"?includeProduct=true":""}`),"getMyProfile",0,()=>a("/v1/profile/me"),"getProductSet",0,t=>l(`/v1/productSets/${t}`),"getProductSets",0,c,"getQRCodes",0,t=>{let e=t?`?productSetId=${t}`:"";return l(`/v1/qrcodes${e}`)},"markerPatterns",0,{list:async()=>l("/v1/marker-patterns"),get:async t=>l(`/v1/marker-patterns/${t}`),upload:async t=>l("/v1/marker-patterns/upload",{method:"POST",body:JSON.stringify(t)}),update:async(t,e)=>l(`/v1/marker-patterns/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>l(`/v1/marker-patterns/${t}`,{method:"DELETE"}),validate:async(t,e)=>l(`/v1/marker-patterns/${t}/validate`,{method:"POST",body:JSON.stringify({validationResult:e})})},"updateProductSet",0,(t,e)=>l(`/v1/productSets/${t}`,{method:"PUT",body:JSON.stringify(e)})])},15125,(t,e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={VALID_LOADERS:function(){return r},imageConfigDefault:function(){return s}};for(var o in i)Object.defineProperty(n,o,{enumerable:!0,get:i[o]});let r=["default","imgix","cloudinary","akamai","custom"],s={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},13521,(t,e,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ImageConfigContext",{enumerable:!0,get:function(){return r}});let i=t.r(41705)._(t.r(91788)),o=t.r(15125),r=i.default.createContext(o.imageConfigDefault)},64477,t=>{"use strict";let e="https://cdn.wmcyn.online/assets/wmcyn-logo.glb",n=[.3,.3,.3],i=[0,0,0],o=[0,0,0],r=()=>({type:"model",src:e,scale:n,rotation:i,position:o});function s(t){var e,n;let i,o=[],s=t.overlayConfig?.mode||"default",a=(i=t.overlayConfig?.custom)?{type:i.type,src:i.src,scale:i.scale,position:i.position,rotation:i.rotation,text:i.text}:null;return"default"===s?o.push(r()):"custom"===s?o.push(a??r()):"stacked"===s&&o.push(r(),...a?[a]:[]),{markerType:t.markerType,markerDataUrl:(e=t.markerType,n=t.markerDataUrl,"hiro"===e&&"USE_DEFAULT_HIRO_PATTERN"===n?"https://cdn.wmcyn.online/ar/patterns/hiro.patt":n),overlays:o,meta:t.metadata,asset3D:t.asset3D}}t.s(["DEFAULT_LOGO_URL",0,e,"resolveArConfig",()=>s])},59580,t=>{"use strict";var e=t.i(91398),n=t.i(91788),i=t.i(32369),o=t.i(78424),r=t.i(63327),s=i;let a={type:"change"},l={type:"start"},c={type:"end"},u=new s.Ray,h=new s.Plane,d=Math.cos(70*s.MathUtils.DEG2RAD),p=new s.Vector3,f=2*Math.PI;class m extends s.Controls{constructor(t,e=null){super(t,e),this.state=-1,this.target=new s.Vector3,this.cursor=new s.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:s.MOUSE.ROTATE,MIDDLE:s.MOUSE.DOLLY,RIGHT:s.MOUSE.PAN},this.touches={ONE:s.TOUCH.ROTATE,TWO:s.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new s.Vector3,this._lastQuaternion=new s.Quaternion,this._lastTargetPosition=new s.Vector3,this._quat=new s.Quaternion().setFromUnitVectors(t.up,new s.Vector3(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new s.Spherical,this._sphericalDelta=new s.Spherical,this._scale=1,this._panOffset=new s.Vector3,this._rotateStart=new s.Vector2,this._rotateEnd=new s.Vector2,this._rotateDelta=new s.Vector2,this._panStart=new s.Vector2,this._panEnd=new s.Vector2,this._panDelta=new s.Vector2,this._dollyStart=new s.Vector2,this._dollyEnd=new s.Vector2,this._dollyDelta=new s.Vector2,this._dollyDirection=new s.Vector3,this._mouse=new s.Vector2,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=_.bind(this),this._onPointerDown=y.bind(this),this._onPointerUp=g.bind(this),this._onContextMenu=k.bind(this),this._onMouseWheel=E.bind(this),this._onKeyDown=S.bind(this),this._onTouchStart=w.bind(this),this._onTouchMove=P.bind(this),this._onMouseDown=b.bind(this),this._onMouseMove=v.bind(this),this._interceptControlDown=T.bind(this),this._interceptControlUp=x.bind(this),null!==this.domElement&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(a),this.update(),this.state=-1}update(t=null){let e=this.object.position;p.copy(e).sub(this.target),p.applyQuaternion(this._quat),this._spherical.setFromVector3(p),this.autoRotate&&-1===this.state&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(n)&&isFinite(i)&&(n<-Math.PI?n+=f:n>Math.PI&&(n-=f),i<-Math.PI?i+=f:i>Math.PI&&(i-=f),n<=i?this._spherical.theta=Math.max(n,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+i)/2?Math.max(n,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let t=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=t!=this._spherical.radius}if(p.setFromSpherical(this._spherical),p.applyQuaternion(this._quatInverse),e.copy(this.target).add(p),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let t=null;if(this.object.isPerspectiveCamera){let e=p.length();t=this._clampDistance(e*this._scale);let n=e-t;this.object.position.addScaledVector(this._dollyDirection,n),this.object.updateMatrixWorld(),o=!!n}else if(this.object.isOrthographicCamera){let e=new s.Vector3(this._mouse.x,this._mouse.y,0);e.unproject(this.object);let n=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=n!==this.object.zoom;let i=new s.Vector3(this._mouse.x,this._mouse.y,0);i.unproject(this.object),this.object.position.sub(i).add(e),this.object.updateMatrixWorld(),t=p.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==t&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(t).add(this.object.position):(u.origin.copy(this.object.position),u.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(u.direction))<d?this.object.lookAt(this.target):(h.setFromNormalAndCoplanarPoint(this.object.up,this.target),u.intersectPlane(h,this.target))))}else if(this.object.isOrthographicCamera){let t=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),t!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,!!(o||this._lastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this._lastQuaternion.dot(this.object.quaternion))>1e-6||this._lastTargetPosition.distanceToSquared(this.target)>1e-6)&&(this.dispatchEvent(a),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(t){return null!==t?f/60*this.autoRotateSpeed*t:f/60/60*this.autoRotateSpeed}_getZoomScale(t){let e=Math.abs(.01*t);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){p.setFromMatrixColumn(e,0),p.multiplyScalar(-t),this._panOffset.add(p)}_panUp(t,e){!0===this.screenSpacePanning?p.setFromMatrixColumn(e,1):(p.setFromMatrixColumn(e,0),p.crossVectors(this.object.up,p)),p.multiplyScalar(t),this._panOffset.add(p)}_pan(t,e){let n=this.domElement;if(this.object.isPerspectiveCamera){let i=this.object.position;p.copy(i).sub(this.target);let o=p.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*o/n.clientHeight,this.object.matrix),this._panUp(2*e*o/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let n=this.domElement.getBoundingClientRect(),i=t-n.left,o=e-n.top,r=n.width,s=n.height;this._mouse.x=i/r*2-1,this._mouse.y=-(o/s*2)+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(f*this._rotateDelta.x/e.clientHeight),this._rotateUp(f*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(f*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-f*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(f*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-f*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(1===this._pointers.length)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this._rotateStart.set(n,i)}}_handleTouchStartPan(t){if(1===this._pointers.length)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this._panStart.set(n,i)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),n=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(n*n+i*i);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(1==this._pointers.length)this._rotateEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this._rotateEnd.set(n,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(f*this._rotateDelta.x/e.clientHeight),this._rotateUp(f*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(1===this._pointers.length)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);this._panEnd.set(n,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),n=t.pageX-e.x,i=t.pageY-e.y,o=Math.sqrt(n*n+i*i);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let r=(t.pageX+e.x)*.5,s=(t.pageY+e.y)*.5;this._updateZoomParameters(r,s)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return void this._pointers.splice(e,1)}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];void 0===e&&(e=new s.Vector2,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,n={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}return t.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}}function y(t){!1===this.enabled||(0===this._pointers.length&&(this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(t)||(this._addPointer(t),"touch"===t.pointerType?this._onTouchStart(t):this._onMouseDown(t)))}function _(t){!1!==this.enabled&&("touch"===t.pointerType?this._onTouchMove(t):this._onMouseMove(t))}function g(t){switch(this._removePointer(t),this._pointers.length){case 0:this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(c),this.state=-1;break;case 1:let e=this._pointers[0],n=this._pointerPositions[e];this._onTouchStart({pointerId:e,pageX:n.x,pageY:n.y})}}function b(t){let e;switch(t.button){case 0:e=this.mouseButtons.LEFT;break;case 1:e=this.mouseButtons.MIDDLE;break;case 2:e=this.mouseButtons.RIGHT;break;default:e=-1}switch(e){case s.MOUSE.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(t),this.state=1;break;case s.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=2}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=0}break;case s.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(t),this.state=0}else{if(!1===this.enablePan)return;this._handleMouseDownPan(t),this.state=2}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(l)}function v(t){switch(this.state){case 0:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(t);break;case 1:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(t);break;case 2:if(!1===this.enablePan)return;this._handleMouseMovePan(t)}}function E(t){!1!==this.enabled&&!1!==this.enableZoom&&-1===this.state&&(t.preventDefault(),this.dispatchEvent(l),this._handleMouseWheel(this._customWheelEvent(t)),this.dispatchEvent(c))}function S(t){!1!==this.enabled&&this._handleKeyDown(t)}function w(t){switch(this._trackPointer(t),this._pointers.length){case 1:switch(this.touches.ONE){case s.TOUCH.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(t),this.state=3;break;case s.TOUCH.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(t),this.state=4;break;default:this.state=-1}break;case 2:switch(this.touches.TWO){case s.TOUCH.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(t),this.state=5;break;case s.TOUCH.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(t),this.state=6;break;default:this.state=-1}break;default:this.state=-1}-1!==this.state&&this.dispatchEvent(l)}function P(t){switch(this._trackPointer(t),this.state){case 3:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(t),this.update();break;case 4:if(!1===this.enablePan)return;this._handleTouchMovePan(t),this.update();break;case 5:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(t),this.update();break;case 6:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(t),this.update();break;default:this.state=-1}}function k(t){!1!==this.enabled&&t.preventDefault()}function T(t){"Control"===t.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function x(t){"Control"===t.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function C({src:t,width:s=480,height:a=360,background:l="transparent"}){let c=(0,n.useRef)(null),u=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let e=c.current;if(!e)return;let n=new i.Scene,h=new i.PerspectiveCamera(45,s/a,.1,200);h.position.set(0,.6,2.8);let d=new o.WebGLRenderer({antialias:!0,alpha:!0});d.setPixelRatio(Math.min(window.devicePixelRatio,2)),d.setSize(s,a),d.setClearColor(new i.Color("#000000"),+("transparent"!==l)),e.appendChild(d.domElement);let p=new i.HemisphereLight(0xffffff,4473924,1);p.position.set(0,1,0),n.add(p);let f=new i.DirectionalLight(0xffffff,.8);f.position.set(2,2,2),n.add(f);let y=new m(h,d.domElement);y.enableDamping=!0,y.dampingFactor=.08,y.enablePan=!1;let _=new i.Group;n.add(_);let g=new r.GLTFLoader;g.setCrossOrigin("anonymous"),g.load(t,t=>{let e=t.scene||t.scenes?.[0];if(e){let t=new i.Box3().setFromObject(e),n=new i.Vector3;t.getSize(n);let o=Math.max(n.x,n.y,n.z);e.scale.setScalar(1.6/o);let r=new i.Vector3;t.getCenter(r),e.position.sub(r),_.add(e)}},void 0,t=>{console.error("model viewer failed to load model:",t)});let b=()=>{u.current=requestAnimationFrame(b),y.update(),d.render(n,h)};b();let v=()=>{h.aspect=s/a,h.updateProjectionMatrix(),d.setSize(s,a)};return window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v),u.current&&cancelAnimationFrame(u.current),y.dispose(),d.dispose(),e.removeChild(d.domElement),n.clear()}},[t,s,a,l]),(0,e.jsx)("div",{ref:c,style:{width:s,height:a,background:l},"aria-label":"3d-model-viewer"})}t.s(["default",()=>C],59580)},33003,t=>{"use strict";var e=t.i(91398),n=t.i(3828),i=t.i(91788),o=t.i(36613),r=t.i(64477),s=t.i(59580);function a(){let{query:t}=(0,n.useRouter)(),a=t.code||"",[l,c]=(0,i.useState)(r.DEFAULT_LOGO_URL),[u,h]=(0,i.useState)(!0),[d,p]=(0,i.useState)(null),[f,m]=(0,i.useState)("3D Model Viewer");return((0,i.useEffect)(()=>{a&&(async()=>{try{h(!0);let t=await (0,o.fetchArConfigByCode)(a),e=(0,r.resolveArConfig)(t),n=e.overlays.find(t=>"model"===t.type&&t.src);n?.src&&c(n.src),e.meta?.title&&m(e.meta.title)}catch(t){console.error("Failed to load viewer config:",t),p("Invalid or expired QR code.")}finally{h(!1)}})()},[a]),u)?(0,e.jsxs)("main",{style:{padding:24,textAlign:"center",background:"#000",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"#fff"},children:[(0,e.jsx)("h1",{children:"Loading 3D Model..."}),(0,e.jsx)("p",{children:"Please wait while we prepare your content."})]}):d?(0,e.jsxs)("main",{style:{padding:24,textAlign:"center",background:"#000",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",color:"#fff"},children:[(0,e.jsx)("h1",{children:"Error"}),(0,e.jsx)("p",{children:d}),(0,e.jsx)("button",{onClick:()=>window.history.back(),style:{padding:"12px 24px",fontSize:16,backgroundColor:"#fff",color:"#000",border:"none",borderRadius:8,cursor:"pointer",marginTop:16},children:"Go Back"})]}):(0,e.jsxs)("main",{style:{padding:0,background:"#000",height:"100vh",display:"flex",flexDirection:"column"},children:[(0,e.jsxs)("div",{style:{padding:"16px 24px",background:"rgba(0,0,0,0.8)",color:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",position:"absolute",top:0,left:0,right:0,zIndex:10},children:[(0,e.jsx)("h1",{style:{margin:0,fontSize:18},children:f}),(0,e.jsx)("button",{onClick:()=>window.history.back(),style:{padding:"8px 16px",fontSize:14,backgroundColor:"transparent",color:"#fff",border:"1px solid #fff",borderRadius:4,cursor:"pointer"},children:"Back"})]}),(0,e.jsx)("div",{style:{flex:1,width:"100%",height:"100vh",position:"relative"},children:(0,e.jsx)(s.default,{src:l,width:window.innerWidth,height:window.innerHeight,background:"transparent"})}),(0,e.jsx)("div",{style:{position:"absolute",bottom:24,left:24,right:24,background:"rgba(0,0,0,0.8)",color:"#fff",padding:16,borderRadius:8,textAlign:"center"},children:(0,e.jsx)("p",{style:{margin:0,fontSize:14},children:"Drag to rotate  Scroll to zoom  Right-click to pan"})})]})}t.s(["default",()=>a])},33846,(t,e,n)=>{let i="/viewer/[code]";(window.__NEXT_P=window.__NEXT_P||[]).push([i,()=>t.r(33003)]),e.hot&&e.hot.dispose(function(){window.__NEXT_P.push([i])})},48761,t=>{t.v(e=>Promise.all(["static/chunks/fd7c0943d5cd5e09.js"].map(e=>t.l(e))).then(()=>e(93594)))},28805,t=>{t.v(e=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(e=>t.l(e))).then(()=>e(79466)))}]);