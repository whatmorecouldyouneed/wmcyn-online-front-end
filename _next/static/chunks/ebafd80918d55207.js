(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15125,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={VALID_LOADERS:function(){return s},imageConfigDefault:function(){return l}};for(var n in i)Object.defineProperty(a,n,{enumerable:!0,get:i[n]});let s=["default","imgix","cloudinary","akamai","custom"],l={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},13521,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"ImageConfigContext",{enumerable:!0,get:function(){return s}});let i=e.r(41705)._(e.r(91788)),n=e.r(15125),s=i.default.createContext(n.imageConfigDefault)},64537,e=>{"use strict";var t=e.i(91398),a=e.i(91788),i=e.i(3828),n=e.i(44054),s=e.i(36613),l=e.i(77934);function r({productSet:e,onSubmit:i,onCancel:n,loading:r=!1}){let o,[d,c]=(0,a.useState)({name:"",description:"",campaign:"",markerPatternId:"",arTitle:"",arDescription:"",arActions:[],items:[],checkout:{type:"product",cartLink:"",discountCode:""},remainingInventory:0,linkedARSessionId:""}),[m,u]=(0,a.useState)([]),[p,h]=(0,a.useState)(!1),[f,x]=(0,a.useState)([]),[g,y]=(0,a.useState)(!1),[j,b]=(0,a.useState)({});(0,a.useEffect)(()=>{v()},[]),(0,a.useEffect)(()=>{e&&c({name:e.name||"",description:e.description||"",campaign:e.campaign||"",markerPatternId:"",arTitle:e.name||"",arDescription:e.description||"",arActions:[],items:e.items||[],checkout:e.checkout||{type:"product",cartLink:"",discountCode:""},remainingInventory:e.stats?.remainingInventory||0,linkedARSessionId:e.linkedARSessionId||""})},[e]);let v=async()=>{try{h(!0);let e=await s.markerPatterns.list();u(e.markerPatterns||[])}catch(e){console.error("failed to load marker patterns:",e)}finally{h(!1)}},k=async e=>{let t;if(e.preventDefault(),t={},d.name.trim()||(t.name="name is required"),0===d.items.length&&(t.items="at least one item is required"),d.items.forEach((e,a)=>{e.productId.trim()||(t[`item_${a}_productId`]="product ID is required"),(!e.quantity||e.quantity<=0)&&(t[`item_${a}_quantity`]="quantity must be greater than 0")}),d.checkout.type||(t.checkoutType="checkout type is required"),"cart"!==d.checkout.type||d.checkout.cartLink&&d.checkout.cartLink.trim()||(t.cartLink="cart link is required for cart type"),d.remainingInventory<0&&(t.remainingInventory="remaining inventory cannot be negative"),b(t),0===Object.keys(t).length)try{let e={name:d.name,description:d.description,campaign:d.campaign,items:d.items,checkout:d.checkout,remainingInventory:d.remainingInventory};await i(e)}catch(e){console.error("form submission error:",e)}},N=(e,t,a)=>{c(i=>({...i,items:i.items.map((i,n)=>n===e?{...i,[t]:a}:i)}))},S=(e,t)=>{c(a=>({...a,checkout:{...a.checkout,[e]:t}}))};return(0,t.jsxs)("form",{onSubmit:k,className:l.default.adminForm,children:[(0,t.jsxs)("div",{className:l.default.formSection,children:[(0,t.jsx)("h3",{className:l.default.formSectionTitle,children:"basic information"}),(0,t.jsx)("div",{className:l.default.formRow,children:(0,t.jsxs)("div",{className:l.default.formRowItem,children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"white"},children:"name *"}),(0,t.jsx)("input",{type:"text",value:d.name,onChange:e=>c(t=>({...t,name:e.target.value})),className:l.default.inputField,placeholder:"e.g., F&F Week One — WMCYN Hoodie Pack",disabled:r}),j.name&&(0,t.jsx)("div",{style:{color:"#ff6b6b",fontSize:"0.8rem",marginTop:"4px"},children:j.name})]})}),(0,t.jsx)("div",{className:l.default.formRow,children:(0,t.jsxs)("div",{className:l.default.formRowItem,children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"white"},children:"description"}),(0,t.jsx)("textarea",{value:d.description,onChange:e=>c(t=>({...t,description:e.target.value})),className:l.default.inputField,placeholder:"describe this wmcyn product...",rows:3,disabled:r})]})}),(0,t.jsx)("div",{className:l.default.formRow,children:(0,t.jsxs)("div",{className:l.default.formRowItem,children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"white"},children:"campaign"}),(0,t.jsx)("input",{type:"text",value:d.campaign,onChange:e=>c(t=>({...t,campaign:e.target.value})),className:l.default.inputField,placeholder:"e.g., friends-and-family-2024",disabled:r})]})})]}),(0,t.jsxs)("div",{className:l.default.formSection,children:[(0,t.jsx)("h3",{className:l.default.formSectionTitle,children:"items *"}),j.items&&(0,t.jsx)("div",{style:{color:"#ff6b6b",fontSize:"0.8rem",marginBottom:"16px"},children:j.items}),(0,t.jsx)("div",{className:l.default.itemsList,children:d.items.map((e,a)=>(0,t.jsxs)("div",{className:l.default.itemRow,children:[(0,t.jsxs)("div",{className:`${l.default.itemInput} ${l.default.formRowItem}`,children:[(0,t.jsx)("input",{type:"text",value:e.productId,onChange:e=>N(a,"productId",e.target.value),className:l.default.inputField,placeholder:"product ID",disabled:r}),j[`item_${a}_productId`]&&(0,t.jsx)("div",{style:{color:"#ff6b6b",fontSize:"0.8rem",marginTop:"4px"},children:j[`item_${a}_productId`]})]}),(0,t.jsxs)("div",{className:`${l.default.itemQuantity} ${l.default.formRowItem}`,children:[(0,t.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:e=>N(a,"quantity",parseInt(e.target.value)||1),className:l.default.inputField,disabled:r}),j[`item_${a}_quantity`]&&(0,t.jsx)("div",{style:{color:"#ff6b6b",fontSize:"0.8rem",marginTop:"4px"},children:j[`item_${a}_quantity`]})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{c(e=>({...e,items:e.items.filter((e,t)=>t!==a)}))},className:l.default.removeItemButton,disabled:r,children:"remove"})]},a))}),(0,t.jsx)("button",{type:"button",onClick:()=>{c(e=>({...e,items:[...e.items,{productId:"",quantity:1}]}))},className:l.default.addItemButton,disabled:r,children:"+ add item"})]}),(0,t.jsxs)("div",{className:l.default.formSection,children:[(0,t.jsx)("h3",{className:l.default.formSectionTitle,children:"checkout configuration"}),(0,t.jsx)("div",{className:l.default.formRow,children:(0,t.jsxs)("div",{className:l.default.formRowItem,children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"white"},children:"type *"}),(0,t.jsxs)("select",{value:d.checkout.type,onChange:e=>S("type",e.target.value),className:l.default.inputField,disabled:r,children:[(0,t.jsx)("option",{value:"cart",children:"cart"}),(0,t.jsx)("option",{value:"checkout",children:"checkout"}),(0,t.jsx)("option",{value:"product",children:"product"})]}),j.checkoutType&&(0,t.jsx)("div",{style:{color:"#ff6b6b",fontSize:"0.8rem",marginTop:"4px"},children:j.checkoutType})]})}),"cart"===d.checkout.type&&(0,t.jsx)("div",{className:l.default.formRow,children:(0,t.jsxs)("div",{className:l.default.formRowItem,children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"white"},children:"cart link *"}),(0,t.jsx)("input",{type:"url",value:d.checkout.cartLink||"",onChange:e=>S("cartLink",e.target.value),className:l.default.inputField,placeholder:"https://shop.example.com/cart/...",disabled:r}),j.cartLink&&(0,t.jsx)("div",{style:{color:"#ff6b6b",fontSize:"0.8rem",marginTop:"4px"},children:j.cartLink})]})}),(0,t.jsx)("div",{className:l.default.formRow,children:(0,t.jsxs)("div",{className:l.default.formRowItem,children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"white"},children:"discount code"}),(0,t.jsx)("input",{type:"text",value:d.checkout.discountCode||"",onChange:e=>S("discountCode",e.target.value),className:l.default.inputField,placeholder:"e.g., FRIENDS20",disabled:r})]})})]}),(0,t.jsxs)("div",{className:l.default.formSection,children:[(0,t.jsx)("h3",{className:l.default.formSectionTitle,children:"inventory"}),(0,t.jsx)("div",{className:l.default.formRow,children:(0,t.jsxs)("div",{className:l.default.formRowItem,children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"white"},children:"remaining inventory"}),(0,t.jsx)("input",{type:"number",min:"0",value:d.remainingInventory,onChange:e=>c(t=>({...t,remainingInventory:parseInt(e.target.value)||0})),className:l.default.inputField,placeholder:"0",disabled:r}),j.remainingInventory&&(0,t.jsx)("div",{style:{color:"#ff6b6b",fontSize:"0.8rem",marginTop:"4px"},children:j.remainingInventory}),(0,t.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.8rem",marginTop:"4px"},children:"leave as 0 to let the system calculate automatically"})]})})]}),(0,t.jsxs)("div",{className:l.default.formSection,children:[(0,t.jsx)("h3",{className:l.default.formSectionTitle,children:"AR experience (optional)"}),(0,t.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.9rem",marginBottom:"16px"},children:"link this product set to an AR session for enhanced customer experience"}),(0,t.jsx)("div",{className:l.default.formRow,children:(0,t.jsxs)("div",{className:l.default.formRowItem,children:[(0,t.jsx)("label",{style:{display:"block",marginBottom:"8px",color:"white"},children:"linked AR session"}),(0,t.jsxs)("select",{value:d.linkedARSessionId,onChange:e=>c(t=>({...t,linkedARSessionId:e.target.value})),className:l.default.inputField,disabled:r||g,children:[(0,t.jsx)("option",{value:"",children:"no AR session (traditional QR code only)"}),f.map(e=>(0,t.jsxs)("option",{value:e.sessionId,children:[e.metadata.title," ",e.campaign?`(${e.campaign})`:""]},e.sessionId))]}),g&&(0,t.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.6)",fontSize:"0.8rem",marginTop:"4px"},children:"loading AR sessions..."}),d.linkedARSessionId&&(0,t.jsxs)("div",{style:{marginTop:"12px",padding:"12px",background:"rgba(96, 165, 250, 0.1)",border:"1px solid rgba(96, 165, 250, 0.3)",borderRadius:"8px"},children:[(0,t.jsx)("p",{style:{color:"white",fontSize:"0.9rem",margin:"0 0 8px 0",fontWeight:"500"},children:"AR session preview:"}),(o=f.find(e=>e.sessionId===d.linkedARSessionId))?(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.8rem",margin:"0 0 4px 0"},children:[(0,t.jsx)("strong",{children:"title:"})," ",o.metadata.title]}),(0,t.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.8rem",margin:"0 0 4px 0"},children:[(0,t.jsx)("strong",{children:"marker:"})," ",o.markerPattern.name]}),(0,t.jsxs)("p",{style:{color:"rgba(255, 255, 255, 0.8)",fontSize:"0.8rem",margin:"0 0 8px 0"},children:[(0,t.jsx)("strong",{children:"actions:"})," ",o.metadata.actions.length," configured"]}),(0,t.jsx)("a",{href:`/ar-session/${o.sessionId}`,target:"_blank",rel:"noopener noreferrer",style:{color:"#60a5fa",fontSize:"0.8rem",textDecoration:"none",border:"1px solid rgba(96, 165, 250, 0.4)",padding:"4px 8px",borderRadius:"4px",display:"inline-block"},children:"preview AR session →"})]}):null]})]})})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"32px"},children:[(0,t.jsx)("button",{type:"button",onClick:n,className:l.default.buttonSecondary,disabled:r,children:"cancel"}),(0,t.jsx)("button",{type:"submit",className:l.default.buttonPrimary,disabled:r,style:{opacity:r?.6:1,cursor:r?"not-allowed":"pointer"},children:r?"saving...":e?"update wmcyn product":"create wmcyn product"})]})]})}var o=e.i(32750);function d(){let{isAuthenticated:e,loading:d}=(0,n.useAdminAuth)(),c=(0,i.useRouter)(),{id:m}=c.query,[u,p]=(0,a.useState)(null),[h,f]=(0,a.useState)(!0),[x,g]=(0,a.useState)(!1),[y,j]=(0,a.useState)("");(0,a.useEffect)(()=>{d||e||c.push("/admin/login")},[e,d,c]),(0,a.useEffect)(()=>{e&&m&&"string"==typeof m&&b(m)},[e,m]);let b=async e=>{try{f(!0),j("");let t=await (0,s.getProductSet)(e);p(t)}catch(e){console.error("failed to load product set:",e),j(e.message||"failed to load product set")}finally{f(!1)}},v=async e=>{if(u)try{g(!0),await (0,s.updateProductSet)(u.id,e),c.push(`/admin/product-sets/${u.id}/details`)}catch(e){throw console.error("failed to update product set:",e),e}finally{g(!1)}},k=()=>{c.push("/admin")};return d||h?(0,t.jsx)("div",{className:l.default.adminPageContainer,children:(0,t.jsx)("div",{className:l.default.adminContainer,children:(0,t.jsx)("div",{className:l.default.loadingContainer,children:h?"loading product set...":"loading..."})})}):e?y?(0,t.jsx)("div",{className:l.default.adminPageContainer,children:(0,t.jsxs)("div",{className:l.default.adminContainer,children:[(0,t.jsx)("div",{className:l.default.errorContainer,children:y}),(0,t.jsx)("div",{style:{textAlign:"center",marginTop:"24px"},children:(0,t.jsx)("button",{onClick:()=>c.push("/admin"),className:l.default.buttonSecondary,children:"back to dashboard"})})]})}):u?(0,t.jsx)("div",{className:l.default.adminPageContainer,children:(0,t.jsxs)("div",{className:l.default.adminContainer,children:[(0,t.jsxs)("div",{className:l.default.adminHeader,children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,t.jsx)(o.default,{src:"/wmcyn_logo_white.png",alt:"WMCYN Logo",width:80,height:40,priority:!0}),(0,t.jsx)("h1",{className:l.default.adminTitle,children:"edit product set"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[(0,t.jsx)("button",{onClick:()=>c.push(`/admin/product-sets/${u.id}/details`),className:l.default.buttonSecondary,children:"view details"}),(0,t.jsx)("button",{onClick:k,className:l.default.buttonSecondary,children:"back to dashboard"})]})]}),(0,t.jsx)(r,{productSet:u,onSubmit:v,onCancel:k,loading:x})]})}):(0,t.jsx)("div",{className:l.default.adminPageContainer,children:(0,t.jsx)("div",{className:l.default.adminContainer,children:(0,t.jsxs)("div",{className:l.default.emptyState,children:[(0,t.jsx)("h2",{className:l.default.emptyStateTitle,children:"product set not found"}),(0,t.jsx)("p",{className:l.default.emptyStateDescription,children:"the product set you're looking for doesn't exist or has been deleted"}),(0,t.jsx)("button",{onClick:()=>c.push("/admin"),className:l.default.buttonPrimary,children:"back to dashboard"})]})})}):null}e.s(["default",()=>d],64537)},74378,(e,t,a)=>{let i="/admin/product-sets/[id]";(window.__NEXT_P=window.__NEXT_P||[]).push([i,()=>e.r(64537)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([i])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/fd7c0943d5cd5e09.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(t=>e.l(t))).then(()=>t(79466)))}]);