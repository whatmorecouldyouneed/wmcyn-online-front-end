"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[416],{9416:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var o=n(5893),r=n(7294),i=n(1838),a=n.n(i);let l=e=>{let{onClose:t}=e,n=(0,r.useRef)(null),[i,l]=(0,r.useState)(!0),[s,d]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e,t,o,r,i,a,s,c,m;if(!window.THREE||!window.THREEx){console.error("THREE.js or THREEx not found. Check CDN scripts in _document.tsx"),l(!1);return}let u=window.THREE,p=window.THREEx,h=!1,E=()=>{if(!r||!e||!n.current)return;r.onResizeElement(),r.copyElementSizeTo(e.domElement),i&&null!==i.arController&&r.copyElementSizeTo(i.arController.canvas);let t=r.domElement,a=t.videoWidth/t.videoHeight;o.isPerspectiveCamera?(o.aspect=a,o.updateProjectionMatrix()):i&&o.projectionMatrix.copy(i.getProjectionMatrix()),e.setSize(n.current.clientWidth,n.current.clientHeight)},g=()=>{if(s=requestAnimationFrame(g),r&&i&&r.ready){if(i.update(r.domElement),t.visible=!!a&&a.visible,a.visible&&c&&m){let e=new u.Vector3;a.getWorldPosition(e);let t=5>e.length();t!==h&&(c.visible=!t,m.visible=t,h=t,d(t))}e.render(t,o)}};try{(()=>{(e=new u.WebGLRenderer({antialias:!0,alpha:!0})).setClearColor(new u.Color("lightgrey"),0);let s=n.current;s&&(e.setSize(s.clientWidth,s.clientHeight),e.domElement.style.position="absolute",e.domElement.style.top="0px",e.domElement.style.left="0px",e.domElement.style.zIndex="auto",s.appendChild(e.domElement),t=new u.Scene,o=new u.Camera,t.add(o),(r=new p.ArToolkitSource({sourceType:"webcam"})).init(()=>{setTimeout(()=>{E(),l(!1)},500)}),(i=new p.ArToolkitContext({cameraParametersUrl:p.ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono"})).init(()=>{o.projectionMatrix.copy(i.getProjectionMatrix())}),a=new u.Group,t.add(a),new p.ArMarkerControls(i,a,{type:"pattern",patternUrl:p.ArToolkitContext.baseURL+"../data/data/patt.hiro",changeMatrixMode:"modelViewMatrix"}),new u.FontLoader().load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",e=>{let t=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.01,i=new u.TextGeometry(t,{font:e,size:n,height:.01,curveSegments:8}),a=new u.MeshBasicMaterial({color:0}),l=new u.Mesh(i,a);i.computeBoundingBox();let s=-((i.boundingBox.max.x-i.boundingBox.min.x)/2);return l.position.set(s+o,r,0),l.rotation.set(-Math.PI/2,0,0),l};(c=t("wmcyn og logo tee (sample)\nnumber 1 of 1\nprinted april 17th, 2025\nin atlanta, ga")).visible=!0,c.name="textSmall",(m=t("wmcyn charred holographic tote (sample)\nnumber 1 of 1\nprinted april 18th, 2025\nin atlanta, ga",.09,.55,-1.1)).visible=!1,m.name="textLarge",a.add(c),a.add(m)}),window.addEventListener("resize",E))})(),g()}catch(e){console.error("Error initializing AR scene:",e),l(!1)}return()=>{if(cancelAnimationFrame(s),window.removeEventListener("resize",E),null==a||a.children.forEach(e=>{e.geometry&&e.geometry.dispose(),e.material&&(Array.isArray(e.material)?e.material.forEach(e=>e.dispose()):e.material.dispose())}),t)for(;t.children.length>0;)t.remove(t.children[0]);if(r&&r.domElement){let e=r.domElement.srcObject;e&&e.getTracks().forEach(e=>e.stop()),r.domElement.remove()}null==e||e.dispose(),n.current&&(null==e?void 0:e.domElement)&&n.current.removeChild(e.domElement)}},[]),(0,o.jsxs)("div",{className:a().cameraOverlay,children:[i&&(0,o.jsx)("div",{className:a().arjsLoader,children:"Initializing AR..."}),(0,o.jsx)("div",{ref:n,style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,zIndex:1}}),(0,o.jsx)("button",{onClick:t,className:a().cameraCloseButton,style:{zIndex:2,position:"absolute"},children:"Close AR View"})]})}}}]);