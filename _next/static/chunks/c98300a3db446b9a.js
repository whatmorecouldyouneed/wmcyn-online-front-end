(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13024,e=>{e.v({actions:"ARMetadataOverlay-module-scss-module__srXbZq__actions",available:"ARMetadataOverlay-module-scss-module__srXbZq__available",claimButton:"ARMetadataOverlay-module-scss-module__srXbZq__claimButton",claimed:"ARMetadataOverlay-module-scss-module__srXbZq__claimed",container:"ARMetadataOverlay-module-scss-module__srXbZq__container",description:"ARMetadataOverlay-module-scss-module__srXbZq__description",fadeOut:"ARMetadataOverlay-module-scss-module__srXbZq__fadeOut",header:"ARMetadataOverlay-module-scss-module__srXbZq__header",label:"ARMetadataOverlay-module-scss-module__srXbZq__label",metadata:"ARMetadataOverlay-module-scss-module__srXbZq__metadata",metadataRow:"ARMetadataOverlay-module-scss-module__srXbZq__metadataRow",overlay:"ARMetadataOverlay-module-scss-module__srXbZq__overlay",purchaseButton:"ARMetadataOverlay-module-scss-module__srXbZq__purchaseButton",shareButton:"ARMetadataOverlay-module-scss-module__srXbZq__shareButton",slideUp:"ARMetadataOverlay-module-scss-module__srXbZq__slideUp",status:"ARMetadataOverlay-module-scss-module__srXbZq__status",title:"ARMetadataOverlay-module-scss-module__srXbZq__title",value:"ARMetadataOverlay-module-scss-module__srXbZq__value"})},84859,e=>{e.v({arCameraContainer:"ARCamera-module-scss-module__xueuma__arCameraContainer",closeButton:"ARCamera-module-scss-module__xueuma__closeButton",loadingOverlay:"ARCamera-module-scss-module__xueuma__loadingOverlay",mountPoint:"ARCamera-module-scss-module__xueuma__mountPoint"})},22125,e=>{"use strict";var t=e.i(91398),a=e.i(91788);let r=[{name:"wmcyn-hoodie-monogram",modelUrl:"/models/wmcyn_3d_logo.glb",scale:.5,markerType:"nft",mindTargetSrc:"/patterns/wmcyn-ar-marker-black.mind",label:"wmcyn ar experience",metadata:{id:"wmcyn-hoodie-001",title:"wmcyn monogram hoodie (sample)",description:"premium hoodie with wmcyn monogram design",printDate:"2025-12-22",printLocation:"raleigh, nc",quantity:1,price:{amount:"priceless",currencyCode:"USD"},isClaimed:!1}},{name:"wmcyn-hq-banner",modelUrl:"/models/wmcyn_3d_logo.glb",scale:.5,markerType:"nft",mindTargetSrc:"/patterns/wmcyn-full-hq-banner.mind",label:"wmcyn ar experience",metadata:{id:"wmcyn-banner-001",title:"wmcyn hq office banner",description:"official wmcyn headquarters office banner",printDate:"2025-12-19",printLocation:"atlanta, ga",quantity:1,price:{amount:"priceless",currencyCode:"USD"},isClaimed:!1}}],n=()=>{let e=window;for(let t of[{name:"MINDAR.IMAGE.MindARThree",value:e.MINDAR?.IMAGE?.MindARThree},{name:"MindARThree",value:e.MindARThree},{name:"MINDAR.MindARThree",value:e.MINDAR?.MindARThree}])if(t.value&&"function"==typeof t.value)return console.log("[getMindARThree] Found at:",t.name),t.value;return console.log("[getMindARThree] Not found. Available:",{MINDAR:!!e.MINDAR,"MINDAR.IMAGE":e.MINDAR?.IMAGE?Object.keys(e.MINDAR.IMAGE):"undefined",MindARThree:!!e.MindARThree,THREE:!!e.THREE}),null};var o=e.i(13024);let i=({metadata:e,isVisible:a,onClaim:r,onShare:n,onPurchase:i,onAction:l})=>{let s=(e,t)=>`${"USD"===t?"$":t}${e}`,c=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});if(!e)return console.warn("[ARMetadataOverlay] No metadata provided, returning null"),null;let d="actions"in e&&Array.isArray(e.actions),u=d?e:null,m=d?null:e;return console.log("[ARMetadataOverlay] Rendering with:",{isARSessionMetadata:d,hasActions:u?u.actions?.length:0,actions:u?.actions,createdAt:u?.createdAt,campaign:u?.campaign,description:e.description,title:e.title}),(0,t.jsx)("div",{className:`${o.default.overlay} ${!a?o.default.fadeOut:""}`,children:(0,t.jsxs)("div",{className:o.default.container,children:[(0,t.jsxs)("div",{className:o.default.header,children:[(0,t.jsx)("h3",{className:o.default.title,children:e.title}),m&&(0,t.jsx)("div",{className:o.default.status,children:m.isClaimed?(0,t.jsx)("span",{className:o.default.claimed,children:"âœ“ claimed"}):(0,t.jsx)("span",{className:o.default.available,children:"â— available"})})]}),m&&(0,t.jsxs)("div",{className:o.default.metadata,children:[(0,t.jsxs)("div",{className:o.default.metadataRow,children:[(0,t.jsx)("span",{className:o.default.label,children:"printed:"}),(0,t.jsx)("span",{className:o.default.value,children:c(m.printDate)})]}),(0,t.jsxs)("div",{className:o.default.metadataRow,children:[(0,t.jsx)("span",{className:o.default.label,children:"location:"}),(0,t.jsx)("span",{className:o.default.value,children:m.printLocation})]}),(0,t.jsxs)("div",{className:o.default.metadataRow,children:[(0,t.jsx)("span",{className:o.default.label,children:"edition:"}),(0,t.jsxs)("span",{className:o.default.value,children:[m.quantity," pieces"]})]}),(0,t.jsxs)("div",{className:o.default.metadataRow,children:[(0,t.jsx)("span",{className:o.default.label,children:"price:"}),(0,t.jsx)("span",{className:o.default.value,children:s(m.price.amount,m.price.currencyCode)})]})]}),u&&(u.createdAt||u.campaign)&&(0,t.jsxs)("div",{className:o.default.metadata,children:[u.createdAt&&(0,t.jsxs)("div",{className:o.default.metadataRow,children:[(0,t.jsx)("span",{className:o.default.label,children:"printed:"}),(0,t.jsx)("span",{className:o.default.value,children:c(u.createdAt)})]}),u.campaign&&(0,t.jsxs)("div",{className:o.default.metadataRow,children:[(0,t.jsx)("span",{className:o.default.label,children:"campaign:"}),(0,t.jsx)("span",{className:o.default.value,children:u.campaign})]})]}),e.description&&e.description.trim()&&(0,t.jsx)("p",{className:o.default.description,children:e.description}),(0,t.jsx)("div",{className:o.default.actions,children:u?u.actions.map((e,a)=>(0,t.jsx)("button",{className:"purchase"===e.type?o.default.purchaseButton:"claim"===e.type?o.default.claimButton:"share"===e.type?o.default.shareButton:o.default.infoButton,onClick:()=>{e.url&&window.open(e.url,"_blank"),l?.(e)},children:e.label},a)):m?(0,t.jsxs)(t.Fragment,{children:[!m.isClaimed&&r&&(0,t.jsx)("button",{className:o.default.claimButton,onClick:r,children:"claim"}),(0,t.jsxs)("button",{className:o.default.purchaseButton,disabled:!0,children:["buy ",s(m.price.amount,m.price.currencyCode)]}),n&&(0,t.jsx)("button",{className:o.default.shareButton,onClick:n,children:"ðŸ“¸"})]}):null})]})})},l="your_facebook_app_id_here",s=()=>{let e=navigator.userAgent.toLowerCase(),t=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e),a=/ipad|iphone|ipod/.test(e);return{isMobile:t,isIOS:a,isAndroid:/android/.test(e),supportsWebShare:"share"in navigator&&"function"==typeof navigator.share}},c=e=>new Promise((t,a)=>{let r=new FileReader;r.onload=()=>{"string"==typeof r.result?t(r.result.split(",")[1]):a(Error("Failed to convert blob to base64"))},r.onerror=a,r.readAsDataURL(e)}),d=async e=>{let{backgroundImage:t,stickerImage:a,backgroundTopColor:r,backgroundBottomColor:n}=e;try{let e=`instagram://story-camera?source_application=${l}`;if(!await new Promise(t=>{let a=document.createElement("iframe");a.style.display="none",a.src=e;let r=setTimeout(()=>{t(!1),document.body.removeChild(a)},2e3);a.onload=()=>{clearTimeout(r),t(!0),document.body.removeChild(a)},document.body.appendChild(a)}))throw Error("Instagram app not available");let o={};return t&&(o["com.instagram.sharedSticker.backgroundImage"]=await c(t)),a&&(o["com.instagram.sharedSticker.stickerImage"]=await c(a)),r&&(o["com.instagram.sharedSticker.backgroundTopColor"]=r),n&&(o["com.instagram.sharedSticker.backgroundBottomColor"]=n),localStorage.setItem("instagram_share_data",JSON.stringify(o)),window.location.href=e,!0}catch(e){return console.error("iOS Instagram sharing failed:",e),!1}},u=async e=>{let{backgroundImage:t,text:a,url:r}=e;try{if(navigator.share&&t){let e={files:[new File([t],"wmcyn-ar-experience.png",{type:"image/png"})],title:"WMCYN AR Experience",text:a||"Check out this amazing AR experience!",url:r};if(navigator.canShare&&navigator.canShare(e))return await navigator.share(e),!0}let e=`instagram://story-camera?source_application=${l}`;return window.location.href=e,setTimeout(()=>{window.open("https://instagram.com","_blank")},2e3),!0}catch(e){return console.error("Android Instagram sharing failed:",e),!1}},m=async e=>{let t=s(),{backgroundImage:a,text:r,url:n}=e;if(t.isMobile)try{if(t.isIOS){if(await d(e))return{success:!0,method:"ios_custom_url_scheme",message:"Opening Instagram app..."}}else if(t.isAndroid&&await u(e))return{success:!0,method:"android_intent",message:"Opening Instagram app..."}}catch(e){console.warn("Native app sharing failed, trying web methods")}if(t.supportsWebShare&&a)try{let e={files:[new File([a],"wmcyn-ar-experience.png",{type:"image/png"})],title:"WMCYN AR Experience",text:r||"Check out this amazing AR experience!",url:n};if(navigator.canShare&&navigator.canShare(e))return await navigator.share(e),{success:!0,method:"web_share_api_with_file",message:"Shared successfully!"}}catch(e){console.warn("Web Share API with file failed")}if(t.supportsWebShare)try{return await navigator.share({title:"WMCYN AR Experience",text:r||"Check out this amazing AR experience!",url:n||"https://wmcyn.online"}),{success:!0,method:"web_share_api_text",message:"Shared successfully!"}}catch(e){console.warn("Web Share API text sharing failed")}if(a)try{let e=URL.createObjectURL(a),t=document.createElement("a");t.href=e,t.download="wmcyn-ar-experience.png",document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(e);let o=`${r||"Check out this amazing WMCYN AR experience!"} ${n||"https://wmcyn.online"}`;return await navigator.clipboard.writeText(o),{success:!0,method:"download_and_copy",message:"Image downloaded! Share text copied to clipboard. Upload to your Instagram Story and paste the text."}}catch(e){console.warn("Download method failed")}try{return await navigator.clipboard.writeText(n||"https://wmcyn.online"),{success:!0,method:"copy_url_fallback",message:"Link copied to clipboard! Share it manually on Instagram Story."}}catch(t){let e=n||"https://wmcyn.online";return{success:!1,method:"manual_fallback",message:`Please copy this link manually: ${e}`}}},h=async e=>{try{console.log("Capturing AR scene for Instagram story...");let t=document.createElement("canvas"),a=t.getContext("2d");if(!a)throw Error("Could not get canvas context");if(t.width=1080,t.height=1920,a.fillStyle="#000000",a.fillRect(0,0,t.width,t.height),e.videoElement&&e.videoElement.videoWidth>0){let r,n,o,i,l=e.videoElement.videoWidth/e.videoElement.videoHeight,s=t.width/t.height;l>s?(r=(n=t.height)*l,o=(t.width-r)/2,i=0):(n=(r=t.width)/l,o=0,i=(t.height-n)/2),a.drawImage(e.videoElement,o,i,r,n)}if(e.canvasElement){let r,n,o,i,l=e.canvasElement.width/e.canvasElement.height,s=t.width/t.height;l>s?(r=(n=t.height)*l,o=(t.width-r)/2,i=0):(n=(r=t.width)/l,o=0,i=(t.height-n)/2),a.globalCompositeOperation="source-over",a.drawImage(e.canvasElement,o,i,r,n)}return await g(a,t,e.metadata),new Promise(e=>{t.toBlob(t=>{e(t)},"image/jpeg",.95)})}catch(e){return console.error("Error capturing AR scene:",e),null}},g=async(e,t,a)=>{let r=t.height-300-60,n=e.createLinearGradient(0,r,0,r+300);n.addColorStop(0,"rgba(0, 0, 0, 0.8)"),n.addColorStop(1,"rgba(0, 0, 0, 0.95)"),e.fillStyle=n,e.fillRect(60,r,t.width-120,300),e.strokeStyle="rgba(255, 255, 255, 0.2)",e.lineWidth=2,e.strokeRect(60,r,t.width-120,300),e.fillStyle="#ffffff",e.font="bold 48px Arial",e.textAlign="center",e.fillText("WMCYN",t.width/2,r+60),e.font="bold 64px Arial",e.fillStyle="#ffffff",e.textAlign="center",e.fillText(a.title.toUpperCase(),t.width/2,r+130);let o=`${"USD"===a.price.currencyCode?"$":a.price.currencyCode}${a.price.amount}`;e.font="42px Arial",e.fillStyle="#10b981",e.textAlign="left",e.fillText(o,100,r+190),e.fillStyle="#ffffff",e.textAlign="right",e.fillText(a.printLocation,t.width-60-40,r+190),e.font="36px Arial",e.fillStyle="rgba(255, 255, 255, 0.8)",e.textAlign="center",e.fillText(`LIMITED EDITION â€¢ ${a.quantity} PIECES`,t.width/2,r+240),e.font="32px Arial",e.fillStyle="rgba(255, 255, 255, 0.7)",e.textAlign="center",e.fillText("SCAN WMCYN QR CODE TO EXPERIENCE IN AR",t.width/2,r+280)},f=async e=>{try{console.log("Sharing AR scene to Instagram...",e.metadata);let t=await h(e);if(!t)throw Error("Failed to capture AR scene");s().isMobile?await m({backgroundImage:t}):(p(t,`wmcyn-ar-${e.metadata.id}.jpg`),alert("Image saved! Please upload this image to your Instagram story manually."))}catch(e){console.error("Error sharing to Instagram:",e),window.open("https://instagram.com","_blank")}},p=(e,t)=>{let a=URL.createObjectURL(e),r=document.createElement("a");r.href=a,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a)};var y=e.i(84859);e.s(["default",0,({onClose:o,configs:l,meta:s})=>{let c=(0,a.useRef)(null),[d,u]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null),g=l||r,p=(0,a.useCallback)(e=>{h(e)},[]);(({mountRef:t,configs:r,setIsLoading:o})=>{let i=(0,a.useRef)(null),l=(0,a.useRef)(null),s=(0,a.useRef)(null),c=(0,a.useRef)(!1),d=(0,a.useRef)(!1),u=(0,a.useRef)(null),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!r||0===r.length)return;let a=t.current;if(!a)return void o(!1);if(c.current)return;d.current=!1;let h=r.filter(e=>e?.markerType==="nft"&&e?.mindTargetSrc),g=r.filter(e=>e?.markerType==="pattern"||!e?.markerType&&e?.patternUrl);return h=h.sort((e,t)=>{let a=e.name?.includes("hoodie"),r=t.name?.includes("hoodie");return a&&!r?-1:!a&&r?1:0}),console.log("[useARScene] Initializing with configs:",{totalConfigs:r.length,nftConfigs:h.length,patternConfigs:g.length,nftMarkers:h.map(e=>({name:e.name,mindTargetSrc:e.mindTargetSrc})),markerOrder:h.map(e=>e.name)}),h.length>0?(console.log("[useARScene] Using NFT AR mode with",h.length,"marker(s)"),f(a,h)):g.length>0?(console.log("[useARScene] Using Pattern AR mode (fallback)"),y(a,g[0])):(console.error("[useARScene] No valid marker configs found"),o(!1)),()=>{if(d.current=!0,s.current&&(cancelAnimationFrame(s.current),s.current=null),m.current){try{m.current.stop()}catch(e){}m.current=null}l.current&&(l.current.getTracks().forEach(e=>e.stop()),l.current=null),i.current&&(i.current.srcObject=null,i.current.remove(),i.current=null),u.current?.renderer&&(u.current.renderer.dispose(),u.current.renderer.domElement.remove(),u.current=null),c.current=!1};async function f(e,t){console.log("[useARScene] Initializing NFT AR with",t.length,"marker(s)");for(let a=0;a<t.length;a++){let r=t[a];console.log(`[useARScene] Attempting to initialize with marker ${a+1}/${t.length}:`,{name:r.name,mindTargetSrc:r.mindTargetSrc});try{await p(e,r,t),console.log("[useARScene] Successfully initialized with marker:",r.name);break}catch(e){if(console.error(`[useARScene] Failed to initialize with marker ${r.name}:`,e),a===t.length-1)throw Error(`Failed to initialize with any marker. Last error: ${e.message}`);console.log("[useARScene] Trying next marker...")}}}async function p(e,t,a){try{let a;console.log("[useARScene] Starting NFT AR initialization..."),console.log("[useARScene] Checking camera permission...");try{let e=await navigator.permissions?.query({name:"camera"});console.log("[useARScene] Camera permission status:",e?.state)}catch(e){console.log("[useARScene] Could not query camera permission (normal on some browsers)")}let r=t.mindTargetSrc;console.log("[useARScene] Checking .mind file accessibility:",r);let i=!1;try{let e=await fetch(r,{method:"GET"});if(!e.ok)throw Error(`.mind file not accessible: ${e.status} ${e.statusText}`);let t=e.headers.get("content-type"),a=e.headers.get("content-length");console.log("[useARScene] .mind file accessible:",{contentType:t,contentLength:a,url:r,status:e.status});let n=await e.blob();if(console.log("[useARScene] .mind file blob size:",n.size,"bytes"),0===n.size)throw Error(".mind file is empty");i=!0}catch(e){if(console.error("[useARScene] .mind file fetch failed:",e.message),console.error("[useARScene] .mind file URL:",r),console.error("[useARScene] Full fetch error:",e),e.message.includes("not accessible")||e.message.includes("empty"))throw Error(`Cannot load .mind file: ${r}. Error: ${e.message}`)}let l=await new Promise((e,t)=>{let a=n();if(a){console.log("[useARScene] MindAR found immediately"),e(a);return}console.log("[useARScene] Waiting for MindAR to load...");let r=0,o=setInterval(()=>{r++;let a=n();if(a){clearInterval(o),console.log("[useARScene] MindAR found after",100*r,"ms"),e(a);return}r>=200&&(clearInterval(o),console.error("[useARScene] MindAR not available after 20 seconds. Window.MINDAR:",window.MINDAR),t(Error("MindAR not available - scripts may have failed to load")))},100)});if(d.current||!l)return;let s=window.THREE;if(!s)throw Error("THREE not available");if(d.current)return;console.log("[useARScene] Creating MindAR instance with target:",t.mindTargetSrc),console.log("[useARScene] File accessibility check result:",i);try{a=new l({container:e,imageTargetSrc:t.mindTargetSrc,maxTrack:1,uiLoading:"no",uiScanning:"no",uiError:"no",filterMinCF:1e-4,filterBeta:.01}),console.log("[useARScene] MindAR instance created successfully"),a.on&&"function"==typeof a.on&&a.on("error",e=>{console.error("[useARScene] MindAR error event:",e),console.error("[useARScene] MindAR error details:",{error:e,targetFile:t.mindTargetSrc,configName:t.name})}),a.error&&console.warn("[useARScene] MindAR has error property:",a.error)}catch(e){throw console.error("[useARScene] MindAR instance creation failed:",e),console.error("[useARScene] Error details:",{message:e?.message,stack:e?.stack,targetFile:t.mindTargetSrc}),Error(`Failed to create MindAR instance. Target file: ${t.mindTargetSrc}. Error: ${e?.message||e}`)}m.current=a;let{renderer:h,scene:g,camera:f}=a;if(!h||!g||!f)throw Error("MindAR missing components");g.add(new s.AmbientLight(0xffffff,.8));let p=new s.DirectionalLight(0xffffff,.6);p.position.set(5,10,7),g.add(p);let y=a.addAnchor(0);y.group&&!g.children.includes(y.group)&&g.add(y.group);let w=t?.modelUrl||"/models/wmcyn_3d_logo.glb",A=null;console.log("[useARScene] Loading 3D model from:",w);let R=s.GLTFLoader;if(R)try{let e=new R;A=(await new Promise((t,a)=>{e.load(w,e=>{console.log("[useARScene] Model loaded successfully"),t(e)},e=>{e.lengthComputable&&console.log("[useARScene] Model loading:",Math.round(e.loaded/e.total*100)+"%")},e=>{console.error("[useARScene] Model load error:",e),a(e)})})).scene;let a=new s.Box3().setFromObject(A),r=a.getSize(new s.Vector3),n=Math.max(r.x,r.y,r.z),o=(t.scale||.8)/n;A.scale.setScalar(o);let i=a.getCenter(new s.Vector3);A.position.set(-i.x*o,-.6,-i.z*o)}catch(e){console.error("[useARScene] Model load failed:",e?.message||e)}else console.warn("[useARScene] GLTFLoader not available");A?y.group.add(A):console.error("[useARScene] No model loaded - check model path:",w);let b=0;u.current={renderer:h,scene:g,camera:f,model:A},y.onTargetFound=()=>{console.log("[useARScene] ðŸŽ¯ TARGET FOUND! Config:",t?.name),y.group&&(y.group.visible=!0,y.group.children.forEach(e=>{e.visible=!0})),t?.onFound?(console.log("[useARScene] Calling onFound callback"),t.onFound()):console.log("[useARScene] No onFound callback defined")},y.onTargetLost=()=>{console.log("[useARScene] Target lost")},console.log("[useARScene] Starting MindAR..."),console.log("[useARScene] MindAR instance:",{hasRenderer:!!a.renderer,hasScene:!!a.scene,hasCamera:!!a.camera,imageTargetSrc:t.mindTargetSrc});let v=new Promise((e,t)=>{try{let r=a.start();r&&"function"==typeof r.then?r.then(()=>{console.log("[useARScene] MindAR.start() promise resolved"),e()}).catch(e=>{console.error("[useARScene] MindAR.start() promise rejected:",e),t(e)}):(console.log("[useARScene] MindAR.start() completed synchronously"),e())}catch(e){console.error("[useARScene] MindAR.start() threw error:",e),t(e)}}),S=new Promise((e,a)=>{setTimeout(()=>{console.error("[useARScene] Timeout reached - MindAR.start() did not complete"),a(Error(`MindAR start timed out after 30 seconds. Check camera permissions and .mind file: ${t.mindTargetSrc}`))},3e4)}),x=setInterval(()=>{console.log("[useARScene] Still waiting for MindAR.start()...",{targetFile:t.mindTargetSrc,configName:t.name})},5e3);try{await Promise.race([v,S]),clearInterval(x)}catch(a){clearInterval(x);let e=a?.message||String(a);if(console.error("[useARScene] MindAR start failed:",e),console.error("[useARScene] Error details:",{message:e,targetFile:t.mindTargetSrc,configName:t.name,error:a}),e.includes("Load failed")||e.includes("null"))throw Error(`Failed to load .mind file: ${t.mindTargetSrc}. Please verify the file exists and is properly compiled. Original error: ${e}`);throw a}if(console.log("[useARScene] MindAR started successfully"),d.current)return void a.stop();let _=performance.now();h.setAnimationLoop(()=>{if(d.current)return;let e=performance.now(),t=Math.min((e-_)/1e3,.1);_=e,u.current?.model&&(b+=.005*t*60,u.current.model.rotation.y=b),h.render(g,f)}),c.current=!0,o(!1)}catch(n){console.error("[useARScene] NFT AR failed:",n?.message||n),console.error("[useARScene] Full error:",n);let t=n?.message||"MindAR could not load",a="Try refreshing the page";t.includes("timed out")?a="Check your camera permissions and internet connection":t.includes("camera")||t.includes("permission")?a="Please allow camera access and try again":t.includes("not available")&&(a="The AR library failed to load. Check your internet connection");let r=document.createElement("div");r.style.cssText="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.9);color:white;padding:24px;border-radius:12px;text-align:center;z-index:100;max-width:85%;",r.innerHTML=`
          <h3 style="margin:0 0 12px 0;font-size:18px;">AR Initialization Failed</h3>
          <p style="margin:0;font-size:14px;opacity:0.85;">${t}</p>
          <p style="margin:12px 0 16px 0;font-size:13px;opacity:0.65;">${a}</p>
          <button onclick="location.reload()" style="background:#fff;color:#000;border:none;padding:10px 24px;border-radius:8px;font-size:14px;cursor:pointer;">Reload Page</button>
        `,e.appendChild(r),o(!1)}}async function y(t,a){try{let r,n=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1});if(d.current)return void n.getTracks().forEach(e=>e.stop());l.current=n;let m=document.createElement("video");if(m.srcObject=n,m.setAttribute("playsinline","true"),m.setAttribute("webkit-playsinline","true"),m.muted=!0,m.playsInline=!0,m.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;z-index:1",t.appendChild(m),i.current=m,await m.play(),d.current)return;let h=await e.A(32404),{GLTFLoader:g}=await e.A(63441);if(d.current)return;let f=window.innerWidth,p=window.innerHeight,y=new h.WebGLRenderer({alpha:!0,antialias:!0});y.setSize(f,p),y.setPixelRatio(Math.min(window.devicePixelRatio,2)),y.setClearColor(0,0),y.domElement.style.cssText="position:absolute;top:0;left:0;width:100%;height:100%;z-index:2;pointer-events:none",t.appendChild(y.domElement);let w=new h.Scene,A=new h.PerspectiveCamera(60,f/p,.1,1e3);A.position.set(0,0,3),A.lookAt(0,0,0),w.add(new h.AmbientLight(0xffffff,.8));let R=new h.DirectionalLight(0xffffff,.6);R.position.set(5,10,7),w.add(R);let b=a?.modelUrl||"/models/wmcyn_3d_logo.glb";try{let e=new g,t=await new Promise((t,a)=>{e.load(b,t,void 0,a)});if(d.current)return;r=t.scene;let a=new h.Box3().setFromObject(r),n=a.getCenter(new h.Vector3);r.position.sub(n);let o=a.getSize(new h.Vector3),i=Math.max(o.x,o.y,o.z);r.scale.setScalar(1.5/i),r.position.y+=.25,w.add(r)}catch(e){console.error("[useARScene] Pattern AR model load failed:",e?.message||e)}u.current={renderer:y,scene:w,camera:A,model:r,spinRotation:0};let v=performance.now(),S=()=>{if(d.current)return;s.current=requestAnimationFrame(S);let e=performance.now(),t=Math.min((e-v)/1e3,.1);v=e,r&&u.current&&(u.current.spinRotation+=.005*t*60,r.rotation.y=u.current.spinRotation),y.render(w,A)};S(),window.addEventListener("resize",()=>{let e=window.innerWidth,t=window.innerHeight;A.aspect=e/t,A.updateProjectionMatrix(),y.setSize(e,t)}),c.current=!0,a?.onFound?.(),o(!1)}catch(e){console.error("[useARScene] Fallback AR error:",e?.message),o(!1)}}},[])})({mountRef:c,configs:(0,a.useMemo)(()=>g.map(e=>({...e,onFound:()=>p(e)})),[g,p]),setIsLoading:u}),(0,a.useEffect)(()=>{document.body.classList.add("cameraActive"),document.documentElement.classList.add("cameraActive");let e=document.documentElement,t=document.body,a={htmlOverflow:e.style.overflow,htmlWidth:e.style.width,htmlHeight:e.style.height,bodyOverflow:t.style.overflow,bodyPosition:t.style.position,bodyWidth:t.style.width,bodyHeight:t.style.height,bodyLeft:t.style.left,bodyTop:t.style.top,bodyMargin:t.style.margin,bodyPadding:t.style.padding};e.style.overflow="hidden",e.style.width="100vw",e.style.height="100vh",t.style.overflow="hidden",t.style.position="fixed",t.style.width="100vw",t.style.height="100vh",t.style.left="0",t.style.top="0",t.style.margin="0",t.style.padding="0",window.scrollTo(0,1);let r=()=>{setTimeout(()=>{window.scrollTo(0,1),c.current&&window.dispatchEvent(new Event("resize"))},100)};return window.addEventListener("orientationchange",r),window.addEventListener("resize",r),()=>{document.body.classList.remove("cameraActive"),document.documentElement.classList.remove("cameraActive"),e.style.overflow=a.htmlOverflow,e.style.width=a.htmlWidth,e.style.height=a.htmlHeight,t.style.overflow=a.bodyOverflow,t.style.position=a.bodyPosition,t.style.width=a.bodyWidth,t.style.height=a.bodyHeight,t.style.left=a.bodyLeft,t.style.top=a.bodyTop,t.style.margin=a.bodyMargin,t.style.padding=a.bodyPadding,window.removeEventListener("orientationchange",r),window.removeEventListener("resize",r)}},[]);let w=(0,a.useMemo)(()=>{if(s){let e={title:s.title||"WMCYN AR Experience",description:s.description,actions:s.actions?.map(e=>({type:e.type,label:e.label,url:e.url}))||[],createdAt:s.createdAt,campaign:s.campaign};return console.log("[ARCamera] overlayMetadata from meta prop:",e),e}return m?.metadata?(console.log("[ARCamera] overlayMetadata from detected marker:",m.metadata),m.metadata):(console.log("[ARCamera] No overlayMetadata available"),null)},[s,m?.metadata]),A=async()=>{if(w){console.log("Sharing product:",w.id||w.title);try{let e=c.current?.querySelector("video"),t=c.current?.querySelector("canvas");await f({metadata:{id:w.id||w.title,title:w.title,price:w.price,printLocation:w.printLocation,quantity:w.quantity},videoElement:e,canvasElement:t})}catch(e){console.error("Error sharing to Instagram:",e),navigator.share?navigator.share({title:w.title||"WMCYN AR",url:window.location.href}):(navigator.clipboard?.writeText(window.location.href),alert("Link copied!"))}}};return(0,t.jsxs)("div",{className:y.default.arCameraContainer,children:[(0,t.jsx)("div",{ref:c,className:y.default.mountPoint}),d&&(0,t.jsx)("div",{className:y.default.loadingOverlay,children:"Initializing AR..."}),!d&&w&&(0,t.jsx)(i,{metadata:w,isVisible:!0,onClaim:()=>{w&&console.log("Claiming product:",w.id||w.title)},onPurchase:()=>{w&&console.log("Purchasing product:",w.id||w.title)},onShare:A,onAction:e=>{e.url&&window.open(e.url,"_blank")}}),o&&(0,t.jsx)("button",{onClick:o,className:y.default.closeButton,children:"Close AR"})]})}],22125)},21938,e=>{e.n(e.i(22125))},32404,e=>{e.v(t=>Promise.all(["static/chunks/66f53d493ed8ac02.js","static/chunks/560cdb78f6480c9d.js","static/chunks/51b620d5854df9c6.js"].map(t=>e.l(t))).then(()=>t(55146)))},63441,e=>{e.v(t=>Promise.all(["static/chunks/28bc01507d75aeef.js","static/chunks/560cdb78f6480c9d.js"].map(t=>e.l(t))).then(()=>t(63327)))}]);