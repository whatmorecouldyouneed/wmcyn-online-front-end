(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{2631:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug/api-test",function(){return r(2845)}])},2845:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var n=r(5893),o=r(837),i=r(1163),a=r(7294),s=r(4379);function l(){let{currentUser:e}=(0,o.a)(),t=(0,i.useRouter)(),[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e||t.push("/login")},[e,t]);let u=async()=>{d(!0),l(null);try{console.log("[API TEST] Testing profile endpoint...");let e=await (0,s.US)();console.log("[API TEST] Profile:",e),console.log("[API TEST] Testing inventory endpoint...");let t=await (0,s.$v)(!0);console.log("[API TEST] Inventory:",t),l({profile:e,inventory:t,success:!0,apiBase:""})}catch(e){console.error("[API TEST] Error:",e),l({error:e.message,success:!1})}finally{d(!1)}};return e?(0,n.jsxs)("main",{style:{padding:24,color:"white",fontFamily:"var(--font-outfit), sans-serif",background:"linear-gradient(180deg, rgba(20,20,30,1), rgba(10,10,15,1))",minHeight:"100vh"},children:[(0,n.jsx)("h1",{style:{marginBottom:"2rem",fontSize:"2rem"},children:"/debug/api-test"}),(0,n.jsx)("button",{onClick:u,disabled:c,style:{background:c?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"1rem 2rem",borderRadius:"8px",cursor:c?"not-allowed":"pointer",fontSize:"16px",fontFamily:"inherit",marginBottom:"2rem"},children:c?"Testing...":"Test API Endpoint"}),r&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Test Results"}),(0,n.jsx)("pre",{style:{background:"rgba(30, 35, 50, 0.8)",padding:"1rem",borderRadius:"8px",overflow:"auto",fontSize:"14px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:JSON.stringify(r,null,2)})]}),(0,n.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,n.jsx)("button",{onClick:()=>t.push("/debug/profile"),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontFamily:"inherit",marginRight:"1rem"},children:"back to debug/profile"}),(0,n.jsx)("button",{onClick:()=>t.push("/dashboard"),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontFamily:"inherit"},children:"back to dashboard"})]})]}):null}},4379:(e,t,r)=>{"use strict";r.d(t,{$v:()=>l,US:()=>s});var n=r(7920);let o=r(4155).env.NEXT_PUBLIC_DEV_X_UID;async function i(){return(null===n.I8||void 0===n.I8?void 0:n.I8.currentUser)?await n.I8.currentUser.getIdToken():(console.warn("[apiClient] No currentUser - user not signed in"),null)}async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Headers(t.headers||{});r.set("content-type","application/json");let a=await i();a?r.set("authorization","Bearer ".concat(a)):o&&r.set("x-uid",o);let s=async()=>fetch("".concat("").concat(e),{...t,headers:r,cache:"no-store"}),l=await s();if(401===l.status&&(null===n.I8||void 0===n.I8?void 0:n.I8.currentUser))try{let e=await n.I8.currentUser.getIdToken(!0);e&&(r.set("authorization","Bearer ".concat(e)),r.delete("x-uid"),l=await s())}catch(e){console.warn("[apiClient] Token refresh failed:",e)}if(401===l.status&&o&&(r.delete("authorization"),r.set("x-uid",o),l=await s()),!l.ok){let e=await l.text().catch(()=>"");throw console.error("[apiClient] Request failed:",l.status,e),Error(e||"request_failed_".concat(l.status))}return await l.json().catch(()=>({}))}let s=()=>a("/v1/profile/me"),l=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return a("/v1/profile/inventory".concat(e?"?includeProduct=true":""))}},1163:(e,t,r)=>{e.exports=r(3079)}},e=>{var t=t=>e(e.s=t);e.O(0,[888,774,179],()=>t(2631)),_N_E=e.O()}]);