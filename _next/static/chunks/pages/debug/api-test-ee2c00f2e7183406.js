(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94],{2631:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug/api-test",function(){return r(2845)}])},2845:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var n=r(5893),o=r(837),i=r(1163),a=r(7294),s=r(4379),l=r(4155);function c(){let{currentUser:e}=(0,o.a)(),t=(0,i.useRouter)(),[r,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e||t.push("/login")},[e,t]);let g=async()=>{u(!0),c(null);try{console.log("[API TEST] Testing profile endpoint...");let e=await (0,s.US)();console.log("[API TEST] Profile:",e),console.log("[API TEST] Testing inventory endpoint...");let t=await (0,s.$v)(!0);console.log("[API TEST] Inventory:",t),c({profile:e,inventory:t,success:!0,apiBase:l.env.NEXT_PUBLIC_API_BASE})}catch(e){console.error("[API TEST] Error:",e),c({error:e.message,success:!1})}finally{u(!1)}};return e?(0,n.jsxs)("main",{style:{padding:24,color:"white",fontFamily:"var(--font-outfit), sans-serif",background:"linear-gradient(180deg, rgba(20,20,30,1), rgba(10,10,15,1))",minHeight:"100vh"},children:[(0,n.jsx)("h1",{style:{marginBottom:"2rem",fontSize:"2rem"},children:"/debug/api-test"}),(0,n.jsx)("button",{onClick:g,disabled:d,style:{background:d?"rgba(255, 255, 255, 0.1)":"rgba(255, 255, 255, 0.2)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white",padding:"1rem 2rem",borderRadius:"8px",cursor:d?"not-allowed":"pointer",fontSize:"16px",fontFamily:"inherit",marginBottom:"2rem"},children:d?"Testing...":"Test API Endpoint"}),r&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Test Results"}),(0,n.jsx)("pre",{style:{background:"rgba(30, 35, 50, 0.8)",padding:"1rem",borderRadius:"8px",overflow:"auto",fontSize:"14px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:JSON.stringify(r,null,2)})]}),(0,n.jsxs)("div",{style:{marginTop:"2rem"},children:[(0,n.jsx)("button",{onClick:()=>t.push("/debug/profile"),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontFamily:"inherit",marginRight:"1rem"},children:"back to debug/profile"}),(0,n.jsx)("button",{onClick:()=>t.push("/dashboard"),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontFamily:"inherit"},children:"back to dashboard"})]})]}):null}},4379:(e,t,r)=>{"use strict";r.d(t,{$v:()=>d,US:()=>c});var n=r(7920),o=r(4155);let i=o.env.NEXT_PUBLIC_API_BASE,a=o.env.NEXT_PUBLIC_DEV_X_UID;async function s(){return(null===n.I8||void 0===n.I8?void 0:n.I8.currentUser)?await n.I8.currentUser.getIdToken():(console.warn("[apiClient] No currentUser - user not signed in"),null)}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Headers(t.headers||{});r.set("content-type","application/json");let o=await s();o?r.set("authorization","Bearer ".concat(o)):a&&r.set("x-uid",a);let l=async()=>fetch("".concat(i).concat(e),{...t,headers:r,cache:"no-store"}),c=await l();if(401===c.status&&(null===n.I8||void 0===n.I8?void 0:n.I8.currentUser))try{let e=await n.I8.currentUser.getIdToken(!0);e&&(r.set("authorization","Bearer ".concat(e)),r.delete("x-uid"),c=await l())}catch(e){console.warn("[apiClient] Token refresh failed:",e)}if(401===c.status&&a&&(r.delete("authorization"),r.set("x-uid",a),c=await l()),!c.ok){let e=await c.text().catch(()=>"");throw console.error("[apiClient] Request failed:",c.status,e),Error(e||"request_failed_".concat(c.status))}return await c.json().catch(()=>({}))}let c=()=>l("/v1/profile/me"),d=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l("/v1/profile/inventory".concat(e?"?includeProduct=true":""))}},1163:(e,t,r)=>{e.exports=r(3079)}},e=>{var t=t=>e(e.s=t);e.O(0,[888,774,179],()=>t(2631)),_N_E=e.O()}]);