(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[460],{8587:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/debug/profile",function(){return t(328)}])},328:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var n=t(5893),i=t(837),o=t(6242),a=t(8083),l=t(1163),s=t(7294);function d(){let{currentUser:e,getIdToken:r}=(0,i.a)(),t=(0,l.useRouter)(),d=(0,o.U)(),u=(0,a.m)(!0),c=async()=>{try{let e=await r();return console.log("[DEBUG] Token retrieved:",e?"".concat(e.substring(0,20),"..."):"null"),e}catch(e){return console.error("[DEBUG] Token error:",e),null}};return((0,s.useEffect)(()=>{c()},[c]),(0,s.useEffect)(()=>{e||t.push("/login")},[e,t]),e)?(0,n.jsxs)("main",{style:{padding:24,color:"white",fontFamily:"var(--font-outfit), sans-serif",background:"linear-gradient(180deg, rgba(20,20,30,1), rgba(10,10,15,1))",minHeight:"100vh"},children:[(0,n.jsx)("h1",{style:{marginBottom:"2rem",fontSize:"2rem"},children:"/debug/profile"}),(0,n.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Profile"}),(0,n.jsx)("pre",{style:{background:"rgba(30, 35, 50, 0.8)",padding:"1rem",borderRadius:"8px",overflow:"auto",fontSize:"14px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:JSON.stringify({loading:d.loading,error:d.error,data:d.data},null,2)})]}),(0,n.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Inventory"}),(0,n.jsx)("pre",{style:{background:"rgba(30, 35, 50, 0.8)",padding:"1rem",borderRadius:"8px",overflow:"auto",fontSize:"14px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:JSON.stringify({loading:u.loading,error:u.error,items:u.items},null,2)})]}),(0,n.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,n.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"Current User"}),(0,n.jsx)("pre",{style:{background:"rgba(30, 35, 50, 0.8)",padding:"1rem",borderRadius:"8px",overflow:"auto",fontSize:"14px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:JSON.stringify({uid:e.uid,email:e.email,displayName:e.displayName,emailVerified:e.emailVerified},null,2)})]}),(0,n.jsx)("button",{onClick:()=>t.push("/debug/api-test"),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontFamily:"inherit",marginRight:"1rem"},children:"test API endpoint"}),(0,n.jsx)("button",{onClick:()=>t.push("/dashboard"),style:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",padding:"0.75rem 1.5rem",borderRadius:"8px",cursor:"pointer",fontSize:"14px",fontFamily:"inherit"},children:"back to dashboard"})]}):null}},8083:(e,r,t)=>{"use strict";t.d(r,{m:()=>o});var n=t(7294),i=t(4379);function o(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],[r,t]=(0,n.useState)(null),[o,a]=(0,n.useState)(!0),[l,s]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let r=!0;return(async()=>{try{a(!0);let n=await (0,i.$v)(e);r&&t(n)}catch(e){var n;r&&s(null!==(n=null==e?void 0:e.message)&&void 0!==n?n:"Failed to load inventory")}finally{r&&a(!1)}})(),()=>{r=!1}},[e]),{items:r,loading:o,error:l}}},6242:(e,r,t)=>{"use strict";t.d(r,{U:()=>o});var n=t(7294),i=t(4379);function o(){let[e,r]=(0,n.useState)(null),[t,o]=(0,n.useState)(!0),[a,l]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=!0;return(async()=>{try{o(!0);let t=await (0,i.US)();e&&r(t)}catch(r){var t;e&&l(null!==(t=null==r?void 0:r.message)&&void 0!==t?t:"Failed to load profile")}finally{e&&o(!1)}})(),()=>{e=!1}},[]),{data:e,loading:t,error:a}}},4379:(e,r,t)=>{"use strict";t.d(r,{$v:()=>s,US:()=>l});var n=t(7920);let i=t(4155).env.NEXT_PUBLIC_DEV_X_UID;async function o(){return(null===n.I8||void 0===n.I8?void 0:n.I8.currentUser)?await n.I8.currentUser.getIdToken():(console.warn("[apiClient] No currentUser - user not signed in"),null)}async function a(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=new Headers(r.headers||{});t.set("content-type","application/json");let a=await o();a?t.set("authorization","Bearer ".concat(a)):i&&t.set("x-uid",i);let l=async()=>fetch("".concat("").concat(e),{...r,headers:t,cache:"no-store"}),s=await l();if(401===s.status&&(null===n.I8||void 0===n.I8?void 0:n.I8.currentUser))try{let e=await n.I8.currentUser.getIdToken(!0);e&&(t.set("authorization","Bearer ".concat(e)),t.delete("x-uid"),s=await l())}catch(e){console.warn("[apiClient] Token refresh failed:",e)}if(401===s.status&&i&&(t.delete("authorization"),t.set("x-uid",i),s=await l()),!s.ok){let e=await s.text().catch(()=>"");throw console.error("[apiClient] Request failed:",s.status,e),Error(e||"request_failed_".concat(s.status))}return await s.json().catch(()=>({}))}let l=()=>a("/v1/profile/me"),s=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return a("/v1/profile/inventory".concat(e?"?includeProduct=true":""))}},1163:(e,r,t)=>{e.exports=t(3079)}},e=>{var r=r=>e(e.s=r);e.O(0,[888,774,179],()=>r(8587)),_N_E=e.O()}]);