(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{7443:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop",function(){return r(1638)}])},1638:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var i=r(5893),o=r(9008),n=r.n(o),a=r(7294),s=r(31),c=r.n(s);let l={domain:"wmcyn-online-shop.myshopify.com",storefrontAccessToken:"4c1fff0b93d13d31f5cebbb8ac9f10c0"},d=null,u=()=>{if(!d){let e=Object.entries(l).filter(e=>{let[t,r]=e;return!r}).map(e=>{let[t]=e;return t});if(e.length>0)throw console.error("missing required shopify environment variables:",e),Error("missing required shopify environment variables: ".concat(e.join(", ")));console.log("initializing shopify client with domain:",l.domain);try{let e=l.domain.replace(/^https?:\/\//,"").replace(/\/$/,"");if(!(d=c().buildClient({domain:e,storefrontAccessToken:l.storefrontAccessToken,apiVersion:"2024-01"}))||!d.product)throw Error("failed to initialize shopify client")}catch(e){throw console.error("error initializing shopify client:",e),d=null,e}}if(!d)throw Error("failed to initialize shopify client");return d},m=e=>({id:String(e.id),title:e.title,handle:e.handle,description:e.description,descriptionHtml:e.descriptionHtml,images:e.images.map(e=>({id:String(e.id),src:e.src,altText:e.altText||null})),variants:e.variants.map(e=>({id:String(e.id),title:e.title,price:{amount:String(e.price.amount),currencyCode:e.price.currencyCode},image:e.image?{src:e.image.src,altText:e.image.altText||null}:void 0}))}),h=()=>{let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[o,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{(async()=>{try{let e;i(!0),console.log("useShopifyProducts: Starting product fetch..."),console.log("Shopify domain:","wmcyn-online-shop.myshopify.com"),console.log("Shopify storefront token exists:",!0);try{if(!(e=u()))throw Error("Shopify client not initialized")}catch(e){throw console.error("Error initializing Shopify client:",e),e}if(console.log("useShopifyProducts: Client initialized successfully"),!e.product||"function"!=typeof e.product.fetchAll)throw Error("Shopify client missing required methods");let r=(await e.product.fetchAll()).map(m);console.log("useShopifyProducts: Successfully fetched products:",r.length),t(r)}catch(e){console.error("useShopifyProducts: Error fetching products:",e),e instanceof Error&&(console.error("Error name:",e.name),console.error("Error message:",e.message),console.error("Error stack:",e.stack),e.message.includes("Missing required Shopify environment variables")&&(console.error("Environment variables check:"),console.error("NEXT_PUBLIC_SHOPIFY_DOMAIN:","wmcyn-online-shop.myshopify.com"),console.error("NEXT_PUBLIC_SHOPIFY_STOREFRONT_ACCESS_TOKEN exists:",!0))),n(e)}finally{i(!1)}})()},[]),{products:e,loading:r,error:o}},p=()=>{let[e,t]=(0,a.useState)(null),[r,i]=(0,a.useState)(!1),[o,n]=(0,a.useState)(null);return{checkoutUrl:e,loading:r,error:o,createShopifyCheckout:async e=>{i(!0),n(null);try{let r=u();if(!r)throw Error("Shopify client not initialized");let i=await r.checkout.create();if(!i||!i.id)throw Error("Failed to create checkout");let o=e.map(e=>({variantId:e.variantId,quantity:e.quantity,...e.customAttributes&&{customAttributes:e.customAttributes}})),n=await r.checkout.addLineItems(i.id,o);if(n&&n.webUrl)t(n.webUrl),window.location.href=n.webUrl;else throw Error("Failed to add items to checkout or retrieve checkout URL.")}catch(e){console.error("Shopify Checkout Error:",e),n(e instanceof Error?e:Error("An unknown error occurred during checkout.")),t(null)}finally{i(!1)}}}};var _=r(1540);let f={product:{styles:{product:{"@media (min-width: 601px)":{"max-width":"100%","margin-left":"0","margin-bottom":"50px"},"text-align":"center"},title:{"font-size":"26px"},button:{"font-family":"Montserrat, sans-serif","font-weight":"bold","font-size":"14px","padding-top":"15px","padding-bottom":"15px",":hover":{"background-color":"#000000"},"background-color":"#000000",":focus":{"background-color":"#000000"},"border-radius":"4px","padding-left":"30px","padding-right":"30px"},quantityInput:{"font-size":"14px","padding-top":"15px","padding-bottom":"15px"},price:{"font-size":"18px"},compareAt:{"font-size":"15.3px"},unitPrice:{"font-size":"15.3px"}},buttonDestination:"checkout",layout:"horizontal",contents:{img:!1,imgWithCarousel:!0,description:!0},width:"100%",text:{button:"Buy now"},googleFonts:["Montserrat"]},cart:{styles:{button:{"font-family":"Montserrat, sans-serif","font-weight":"bold","font-size":"14px","padding-top":"15px","padding-bottom":"15px",":hover":{"background-color":"#000000"},"background-color":"#000000",":focus":{"background-color":"#000000"},"border-radius":"4px"}},text:{total:"Subtotal",button:"Checkout"},googleFonts:["Montserrat"]}};var y=r(1623),g=r.n(y),x=r(2261),v=r(9304);function b(e){let{product:t}=e,r=(0,a.useRef)(null),[o,n]=(0,a.useState)(null),s=(0,a.useRef)(null),{addToCart:c}=(0,_.f)(),{createShopifyCheckout:l,loading:d,error:m}=p(),[h,y]=(0,a.useState)(!1);if(!function(e,t){let{moneyFormat:r="${{amount}}",options:i={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,a.useEffect)(()=>{let o="shopify-buy-button",n=document.getElementById(o),a=()=>{window.ShopifyBuy&&window.ShopifyBuy.UI&&window.ShopifyBuy.UI.onReady(u).then(o=>{o.createComponent("product",{id:t,node:e.current,moneyFormat:r,options:i})})};return n?window.ShopifyBuy&&window.ShopifyBuy.UI?a():n.onload||(n.onload=a):((n=document.createElement("script")).id=o,n.src="https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js",n.async=!0,document.head.appendChild(n),n.onload=a),()=>{document.getElementById(o)}},[e,t,r,i])}(r,t.id,{moneyFormat:"%24%7B%7Bamount%7D%7D",options:f}),(0,a.useEffect)(()=>{s.current&&setTimeout(()=>{var e;null===(e=s.current)||void 0===e||e.slideTo(0)},0)},[t.id]),!t||"object"!=typeof t)return console.error("Invalid product data:",t),null;if(!t.images||!Array.isArray(t.images))return console.error("Product missing images array:",t),null;if(!t.variants||!Array.isArray(t.variants)||0===t.variants.length)return console.error("Product missing valid variants:",t),null;if(!t.title)return console.error("Product missing title:",t),null;let b=t.variants[0];if(!b||!b.price||"string"!=typeof b.price.amount)return console.error("Product missing valid price:",t),null;let S=async()=>{if(t.variants&&t.variants.length>0){let e=t.variants[0].id;try{await l([{variantId:e,quantity:1}])}catch(e){console.error("Buy Now failed from component",e)}}else console.error("No product variants available for checkout.")};return(0,i.jsxs)("div",{className:g().card,children:[t.images&&Array.isArray(t.images)&&t.images.length>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:g().mainSwiper,children:(0,i.jsx)(x.tq,{modules:[v.W_,v.o3,v.tl],spaceBetween:10,slidesPerView:1,navigation:!0,pagination:{clickable:!0},thumbs:{swiper:o&&!o.destroyed?o:null},className:g().swiperWrapper,onSwiper:e=>{s.current=e},initialSlide:0,children:t.images.map((e,r)=>(0,i.jsx)(x.o5,{className:g().mainSlide,children:(0,i.jsx)("div",{className:g().imageContainer,children:(0,i.jsx)("img",{src:e.src,alt:e.altText||t.title||"Product image",className:g().mainImage})})},"main-".concat(e.id||e.src||r)))})}),t.images.length>1&&(0,i.jsx)("div",{className:g().thumbSwiper,children:(0,i.jsx)(x.tq,{modules:[v.o3,v.W_],onSwiper:n,spaceBetween:5,slidesPerView:"auto",watchSlidesProgress:!0,freeMode:!0,className:g().swiperWrapper,initialSlide:0,centeredSlides:!1,children:t.images.map((e,r)=>(0,i.jsx)(x.o5,{className:g().thumbSlide,children:r=>{let{isActive:o}=r;return(0,i.jsx)("div",{className:g().thumbContainer,children:(0,i.jsx)("img",{src:e.src,alt:"Thumbnail ".concat(e.altText||t.title||"Product image"),className:"".concat(g().thumbImage," ").concat(o?g().thumbImageActive:g().thumbImageInactive)})})}},"thumb-".concat(e.id||r)))})})]}):(0,i.jsx)("div",{className:g().noImages,children:"No images available"}),(0,i.jsx)("h2",{className:g().title,children:t.title||"Untitled Product"}),t.variants&&Array.isArray(t.variants)&&t.variants.length>0&&(0,i.jsxs)("div",{className:g().price,children:[Number(t.variants[0].price.amount).toFixed(2)," ",t.variants[0].price.currencyCode]}),t.descriptionHtml&&"string"==typeof t.descriptionHtml&&(0,i.jsx)("div",{className:g().description,dangerouslySetInnerHTML:{__html:t.descriptionHtml},style:{color:"#ffffff"}}),(0,i.jsx)("div",{ref:r}),(0,i.jsxs)("div",{className:g().buttonContainer,children:[(0,i.jsx)("button",{onClick:()=>{if(t.variants&&t.variants.length>0){y(!0);let e=t.variants[0];c(t,e,1),setTimeout(()=>y(!1),1e3)}else console.error("No product variants available to add to cart.")},disabled:h||!t.variants||0===t.variants.length,className:g().addToCartButton,children:h?"adding...":"add to cart"}),(0,i.jsx)("button",{onClick:S,disabled:d||!t.variants||0===t.variants.length,className:g().buyNowButton,children:d?"processing...":"buy now"})]}),m&&(0,i.jsxs)("p",{className:g().error,children:["buy now error: ",m.message]})]})}r(7160),r(2691),r(8509),r(3349);var S=r(5675),w=r.n(S),j=r(656),C=r.n(j);function I(e){let{src:t,alt:r}=e;return(0,i.jsx)("div",{className:C().imageContainer,children:(0,i.jsx)(w(),{src:t,alt:r,fill:!0,className:C().image})})}function N(e){var t;let{isOpen:r,closeCart:o}=e,{cartItems:n,removeFromCart:a,cartCount:s,cartTotal:c}=(0,_.f)(),{createShopifyCheckout:l,loading:d,error:u}=p();if(!r)return null;let m=async()=>{let e=n.map(e=>({variantId:e.variantId,quantity:e.quantity}));await l(e)};return(0,i.jsx)("div",{className:C().modalOverlay,onClick:o,children:(0,i.jsxs)("div",{className:C().modalContent,onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("button",{className:C().closeButton,onClick:o,children:"\xd7"}),(0,i.jsx)("h2",{className:C().title,children:"your cart"}),0===n.length?(0,i.jsx)("p",{className:C().text,children:"your cart is empty."}):(0,i.jsxs)(i.Fragment,{children:[n.map(e=>(0,i.jsxs)("div",{className:C().item,children:[(0,i.jsx)(I,{src:e.image,alt:e.title}),(0,i.jsxs)("div",{className:C().itemDetails,children:[(0,i.jsx)("h3",{className:C().itemTitle,children:e.title}),e.variantTitle&&(0,i.jsx)("p",{className:C().itemVariant,children:e.variantTitle}),(0,i.jsxs)("p",{className:C().itemPrice,children:[parseFloat(e.price).toFixed(2)," ",e.currencyCode]}),(0,i.jsx)("button",{onClick:()=>a(e.variantId),className:C().removeButton,children:"remove"})]})]},e.variantId)),(0,i.jsxs)("div",{className:C().summary,children:[(0,i.jsxs)("p",{className:C().text,children:["subtotal: ",c.toFixed(2)," ",null===(t=n[0])||void 0===t?void 0:t.currencyCode]}),(0,i.jsxs)("p",{className:C().text,children:["items: ",s]}),(0,i.jsx)("button",{onClick:m,disabled:d,className:C().checkoutButton,children:d?"processing...":"checkout"}),u&&(0,i.jsxs)("p",{className:C().errorText,children:["error: ",u.message]})]})]})]})})}var P=r(5438),k=r.n(P);function B(){let{products:e,loading:t,error:r}=h(),{cartCount:o}=(0,_.f)(),[s,c]=(0,a.useState)(!1);if(t)return(0,i.jsx)("div",{children:"loading..."});if(r)return console.error("Shopify products error:",r),(0,i.jsx)("div",{children:"error loading products. please try again later."});if(!e)return(0,i.jsx)("div",{children:"no products found."});let l=e.filter(e=>"object"==typeof e&&null!==e&&e.id?!!e.title&&!!e.variants&&0!==e.variants.length||(console.warn("Product missing essential fields after serialization:",e),!1):(console.warn("Invalid product object in products array:",e),!1));return 0===l.length?(0,i.jsx)("div",{children:"no valid products available to display."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n(),{children:[(0,i.jsx)("title",{children:"Shop | WMCYN"}),(0,i.jsx)("meta",{name:"description",content:"Shop WMCYN's exclusive merchandise."})]}),(0,i.jsxs)("div",{className:k().container,children:[(0,i.jsxs)("div",{className:k().header,children:[(0,i.jsx)("h1",{className:k().title,children:"shop"}),(0,i.jsx)("div",{className:k().cartButtonContainer,children:(0,i.jsxs)("button",{onClick:()=>c(!0),className:k().cartIconButton,"aria-label":"open cart",children:["cart",o>0&&(0,i.jsx)("span",{className:k().cartCountBadge,children:o})]})})]}),(0,i.jsxs)("div",{className:k().content,children:[(0,i.jsx)("div",{className:k().intro,children:(0,i.jsxs)("p",{className:k().introText,children:["welcome fam. ",(0,i.jsx)("br",{})," browse our collection of products below.",(0,i.jsx)("br",{}),"scan the hiro markers on the products ",(0,i.jsx)("br",{})," to see it come to life."]})}),(0,i.jsx)("div",{className:k().productGrid,children:l.map(e=>(0,i.jsx)(b,{product:e},e.id))})]})]}),(0,i.jsx)(N,{isOpen:s,closeCart:()=>c(!1)})]})}},656:e=>{e.exports={modalOverlay:"Cart_modalOverlay__Ir6II",modalContent:"Cart_modalContent__SZijw",closeButton:"Cart_closeButton__IFk5t",title:"Cart_title__pE_Cp",text:"Cart_text__ymnk0",item:"Cart_item__r399M",imageContainer:"Cart_imageContainer__E36lY",image:"Cart_image__5bZ0j",itemDetails:"Cart_itemDetails__PrBBD",itemTitle:"Cart_itemTitle__Mva5W",itemVariant:"Cart_itemVariant__NF3QK",itemPrice:"Cart_itemPrice__je5LZ",removeButton:"Cart_removeButton__3MDJE",summary:"Cart_summary__qDlmO",checkoutButton:"Cart_checkoutButton__cgFwP",errorText:"Cart_errorText__7Jj8n"}},1623:e=>{e.exports={card:"ShopifyProductItem_card__bbP5a",mainSwiper:"ShopifyProductItem_mainSwiper__FuvSu",mainSlide:"ShopifyProductItem_mainSlide__WLvs1",imageContainer:"ShopifyProductItem_imageContainer__AUnwW",mainImage:"ShopifyProductItem_mainImage___t441",thumbImage:"ShopifyProductItem_thumbImage__OhDNH",thumbImageActive:"ShopifyProductItem_thumbImageActive__ineja",thumbImageInactive:"ShopifyProductItem_thumbImageInactive__O20GV",title:"ShopifyProductItem_title__CR9TB",description:"ShopifyProductItem_description__dVynK",price:"ShopifyProductItem_price__GW10T",buttonContainer:"ShopifyProductItem_buttonContainer__dCe7D",baseButton:"ShopifyProductItem_baseButton__CT7fe",addToCartButton:"ShopifyProductItem_addToCartButton__6DauK ShopifyProductItem_baseButton__CT7fe",buyNowButton:"ShopifyProductItem_buyNowButton__TDsru ShopifyProductItem_baseButton__CT7fe",error:"ShopifyProductItem_error__OKF4D",noImages:"ShopifyProductItem_noImages__krcLV",thumbContainer:"ShopifyProductItem_thumbContainer__pfqK3",thumbSlide:"ShopifyProductItem_thumbSlide__Q0efE",thumbSwiper:"ShopifyProductItem_thumbSwiper__RluJy",swiperWrapper:"ShopifyProductItem_swiperWrapper__jSgyZ"}},5438:e=>{e.exports={container:"Shop_container__Qkyq5",header:"Shop_header__oxoQL",title:"Shop_title__ViLym",cartButtonContainer:"Shop_cartButtonContainer__YqvDg",cartIconButton:"Shop_cartIconButton__4U79c",cartCountBadge:"Shop_cartCountBadge__8To4W",content:"Shop_content__SefRe",intro:"Shop_intro__yL85e",introText:"Shop_introText__LuPAf",productGrid:"Shop_productGrid__Z_AYm"}}},e=>{var t=t=>e(e.s=t);e.O(0,[822,675,622,888,774,179],()=>t(7443)),_N_E=e.O()}]);