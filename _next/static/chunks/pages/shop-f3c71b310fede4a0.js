(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{7443:(e,t,o)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/shop",function(){return o(1638)}])},1638:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>w});var r=o(5893),n=o(9008),i=o.n(n),s=o(7294),a=o(31),l=o.n(a);let d={domain:"wmcyn-online-shop.myshopify.com",storefrontAccessToken:"4c1fff0b93d13d31f5cebbb8ac9f10c0"},c=null,p=()=>{if(!c){let e=Object.entries(d).filter(e=>{let[t,o]=e;return!o}).map(e=>{let[t]=e;return t});if(e.length>0)throw console.error("Missing required Shopify environment variables:",e),Error("Missing required Shopify environment variables: ".concat(e.join(", ")));console.log("Initializing Shopify client with domain:",d.domain);let t=(c=l().buildClient({domain:d.domain,storefrontAccessToken:d.storefrontAccessToken,apiVersion:"2024-07"})).product.fetchAll;c.product.fetchAll=async()=>{try{console.log("Attempting to fetch products from Shopify...");let e=await t();return console.log("Successfully fetched products:",e.length),e}catch(e){throw console.error("Error fetching products from Shopify:",e),e instanceof Error&&(console.error("Error name:",e.name),console.error("Error message:",e.message),console.error("Error stack:",e.stack)),e}}}return c},u=()=>{let[e,t]=(0,s.useState)([]),[o,r]=(0,s.useState)(!0),[n,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{(async()=>{try{r(!0),console.log("useShopifyProducts: Starting product fetch...");let e=p();if(!e)throw Error("Shopify client not initialized");let o=await e.product.fetchAll();console.log("useShopifyProducts: Successfully fetched products:",o.length),t(o)}catch(e){console.error("useShopifyProducts: Error fetching products:",e),e instanceof Error&&(console.error("Error name:",e.name),console.error("Error message:",e.message),console.error("Error stack:",e.stack)),i(e)}finally{r(!1)}})()},[]),{products:e,loading:o,error:n}},h=()=>{let[e,t]=(0,s.useState)(null),[o,r]=(0,s.useState)(!1),[n,i]=(0,s.useState)(null);return{checkoutUrl:e,loading:o,error:n,createShopifyCheckout:async e=>{r(!0),i(null);try{let o=p();if(!o)throw Error("Shopify client not initialized");let r=await o.checkout.create();if(!r||!r.id)throw Error("Failed to create checkout");let n=e.map(e=>({variantId:e.variantId,quantity:e.quantity,...e.customAttributes&&{customAttributes:e.customAttributes}})),i=await o.checkout.addLineItems(r.id,n);if(i&&i.webUrl)t(i.webUrl),window.location.href=i.webUrl;else throw Error("Failed to add items to checkout or retrieve checkout URL.")}catch(e){console.error("Shopify Checkout Error:",e),i(e instanceof Error?e:Error("An unknown error occurred during checkout.")),t(null)}finally{r(!1)}}}};var g=o(1540);let f={product:{styles:{product:{"@media (min-width: 601px)":{"max-width":"100%","margin-left":"0","margin-bottom":"50px"},"text-align":"center"},title:{"font-size":"26px"},button:{"font-family":"Montserrat, sans-serif","font-weight":"bold","font-size":"14px","padding-top":"15px","padding-bottom":"15px",":hover":{"background-color":"#000000"},"background-color":"#000000",":focus":{"background-color":"#000000"},"border-radius":"4px","padding-left":"30px","padding-right":"30px"},quantityInput:{"font-size":"14px","padding-top":"15px","padding-bottom":"15px"},price:{"font-size":"18px"},compareAt:{"font-size":"15.3px"},unitPrice:{"font-size":"15.3px"}},buttonDestination:"checkout",layout:"horizontal",contents:{img:!1,imgWithCarousel:!0,description:!0},width:"100%",text:{button:"Buy now"},googleFonts:["Montserrat"]},cart:{styles:{button:{"font-family":"Montserrat, sans-serif","font-weight":"bold","font-size":"14px","padding-top":"15px","padding-bottom":"15px",":hover":{"background-color":"#000000"},"background-color":"#000000",":focus":{"background-color":"#000000"},"border-radius":"4px"}},text:{total:"Subtotal",button:"Checkout"},googleFonts:["Montserrat"]}};o(561),o(5855);let x=o(6066),m=e=>{var t,o;let{product:n}=e,i=(0,s.useRef)(null),[a,l]=(0,s.useState)(null),[d,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(0),y=(0,s.useRef)(null),b=(0,s.useRef)(null),{addToCart:v}=(0,g.f)(),{createShopifyCheckout:w,loading:j,error:S}=h(),[k,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{y.current&&l(y.current),b.current&&c(b.current)},[]),function(e,t){let{moneyFormat:o="${{amount}}",options:r={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.useEffect)(()=>{let n="shopify-buy-button",i=document.getElementById(n),s=()=>{window.ShopifyBuy&&window.ShopifyBuy.UI&&window.ShopifyBuy.UI.onReady(p).then(n=>{n.createComponent("product",{id:t,node:e.current,moneyFormat:o,options:r})})};return i?window.ShopifyBuy&&window.ShopifyBuy.UI?s():i.onload||(i.onload=s):((i=document.createElement("script")).id=n,i.src="https://sdks.shopifycdn.com/buy-button/latest/buy-button-storefront.min.js",i.async=!0,document.head.appendChild(i),i.onload=s),()=>{document.getElementById(n)}},[e,t,o,r])}(i,"string"==typeof n.id?n.id:String(n.id),{moneyFormat:"%24%7B%7Bamount%7D%7D",options:f});let E={slidesToShow:n.images&&n.images.length>=3?3:(null===(t=n.images)||void 0===t?void 0:t.length)||1,slidesToScroll:1,asNavFor:a||void 0,dots:!1,centerMode:n.images&&n.images.length>1,swipeToSlide:!0,focusOnSelect:!0,infinite:n.images&&n.images.length>(n.images&&n.images.length>=3?3:(null===(o=n.images)||void 0===o?void 0:o.length)||1),arrows:!0,responsive:[{breakpoint:600,settings:{arrows:!1}}]},T={width:"100%",height:"auto",maxHeight:"300px",objectFit:"contain",borderRadius:"4px",margin:"0 auto",border:"none",outline:"none"},z={padding:"5px",cursor:"pointer",margin:"0 10px"},I={...z},B={width:"100%",height:"60px",objectFit:"cover",borderRadius:"4px",opacity:.7,border:"none",outline:"none",display:"block"},A={...B,opacity:1},N=async()=>{if(n.variants&&n.variants.length>0){let e=String(n.variants[0].id);try{await w([{variantId:e,quantity:1}])}catch(e){console.error("Buy Now failed from component",e)}}else console.error("No product variants available for checkout.")},R={padding:"12px 20px",border:"none",borderRadius:"5px",fontSize:"16px",cursor:"pointer",fontWeight:"bold",width:"100%",textTransform:"lowercase"},W={...R,backgroundColor:"#ffffff",color:"#000000",border:"1px solid #000000",opacity:k?.7:1},F={...R,backgroundColor:"#000000",color:"#ffffff",opacity:j?.7:1};return(0,r.jsxs)("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"20px",margin:"20px",maxWidth:"350px",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[n.images&&n.images.length>0?(0,r.jsx)("div",{style:{width:"100%",marginBottom:"10px"},children:(0,r.jsx)(x,{dots:!0,infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,asNavFor:d||void 0,arrows:!0,afterChange:e=>m(e),responsive:[{breakpoint:600,settings:{arrows:!1}}],ref:y,children:n.images.map(e=>(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:e.src,alt:e.altText||n.title,style:T})},e.id||e.src))})}):(0,r.jsx)("div",{style:{height:"250px",width:"100%",background:"#eee",display:"flex",alignItems:"center",justifyContent:"center",color:"#777",marginBottom:"20px"},children:"No images available"}),n.images&&n.images.length>1&&(0,r.jsx)("div",{style:{width:"90%",margin:"10px auto 20px auto"},children:(0,r.jsx)(x,{...E,ref:b,children:n.images.map((e,t)=>(0,r.jsx)("div",{style:t===u?I:z,children:(0,r.jsx)("img",{src:e.src,alt:"Thumbnail ".concat(e.altText||n.title),style:t===u?A:B})},"thumb-wrapper-".concat(e.id||t)))})}),(0,r.jsx)("h2",{style:{fontSize:"1.5em",fontWeight:"bold",margin:"10px 0"},children:n.title}),n.variants&&n.variants.length>0&&(0,r.jsxs)("div",{style:{fontSize:"1.2em",fontWeight:"bold",color:"#ffffff",margin:"10px 0"},children:[Number(n.variants[0].price.amount).toFixed(2)," ",n.variants[0].price.currencyCode]}),n.descriptionHtml&&(0,r.jsx)("div",{style:{fontSize:"0.9em",color:"#ffffff",marginBottom:"15px",maxHeight:"100px",overflowY:"auto"},dangerouslySetInnerHTML:{__html:n.descriptionHtml}}),(0,r.jsx)("div",{ref:i}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px",width:"100%",marginTop:"15px"},children:[(0,r.jsx)("button",{onClick:()=>{if(n.variants&&n.variants.length>0){C(!0);let e=n.variants[0];v(n,e,1),setTimeout(()=>C(!1),1e3)}else console.error("No product variants available to add to cart.")},disabled:k||!n.variants||0===n.variants.length,style:W,children:k?"adding...":"add to cart"}),(0,r.jsx)("button",{onClick:N,disabled:j||!n.variants||0===n.variants.length,style:F,children:j?"processing...":"buy now"})]}),S&&(0,r.jsxs)("p",{style:{color:"red",marginTop:"10px"},children:["buy now error: ",S.message]})]})};var y=o(9603),b=o(9417);let v=()=>{var e;let{cartItems:t,isCartOpen:o,closeCart:n,removeFromCart:i,updateQuantity:s,cartTotal:a,cartCount:l}=(0,g.f)(),{createShopifyCheckout:d,loading:c,error:p}=h();if(!o)return null;let u=async()=>{let e=t.map(e=>({variantId:e.variantId,quantity:e.quantity}));e.length>0?await d(e):alert("your cart is empty.")},f={display:"flex",alignItems:"center",marginBottom:"15px",borderBottom:"1px solid #eee",paddingBottom:"10px"},x={width:"60px",height:"60px",objectFit:"cover",marginRight:"15px",borderRadius:"4px"},m={flexGrow:1},v={width:"50px",textAlign:"center",margin:"0 10px",color:"#333",border:"1px solid #ccc",padding:"5px"},w={color:"#333",fontSize:"0.9em",textTransform:"lowercase"};return(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:n,children:(0,r.jsxs)("div",{style:{backgroundColor:"#fff",padding:"20px",borderRadius:"8px",width:"90%",maxWidth:"500px",maxHeight:"80vh",overflowY:"auto",position:"relative",color:"#333"},onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{style:{position:"absolute",top:"10px",right:"10px",background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",color:"#333"},onClick:n,children:(0,r.jsx)(y.G,{icon:b.NBC})}),(0,r.jsx)("h2",{style:{color:"#000",marginBottom:"20px",textTransform:"lowercase"},children:"your cart"}),0===t.length?(0,r.jsx)("p",{style:w,children:"your cart is empty."}):(0,r.jsxs)(r.Fragment,{children:[t.map(e=>(0,r.jsxs)("div",{style:f,children:[(0,r.jsx)("img",{src:e.imageSrc,alt:e.title,style:x}),(0,r.jsxs)("div",{style:m,children:[(0,r.jsx)("strong",{style:{color:"#000"},children:e.title}),e.variantTitle&&(0,r.jsx)("p",{style:{fontSize:"0.9em",color:"#555"},children:e.variantTitle}),(0,r.jsxs)("p",{style:{...w,textTransform:"none"},children:[e.price," ",e.currencyCode]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"number",value:e.quantity,onChange:t=>s(e.variantId,parseInt(t.target.value)),min:"1",style:v}),(0,r.jsx)("button",{onClick:()=>i(e.variantId),style:{background:"transparent",border:"none",color:"red",cursor:"pointer",fontSize:"1rem",paddingLeft:"10px"},children:(0,r.jsx)(y.G,{icon:b.$aW})})]})]},e.variantId)),(0,r.jsxs)("div",{style:{marginTop:"20px",textAlign:"right",fontWeight:"bold"},children:[(0,r.jsxs)("p",{style:w,children:["subtotal: ",a.toFixed(2)," ",null===(e=t[0])||void 0===e?void 0:e.currencyCode]}),(0,r.jsxs)("p",{style:w,children:["items: ",l]})]}),(0,r.jsx)("button",{onClick:u,disabled:c,style:{backgroundColor:"#000000",color:"#ffffff",padding:"12px 20px",border:"none",borderRadius:"5px",fontSize:"16px",cursor:"pointer",fontWeight:"bold",width:"100%",marginTop:"20px",opacity:c?.7:1,textTransform:"lowercase"},children:c?"processing...":"checkout"}),p&&(0,r.jsxs)("p",{style:{color:"red",marginTop:"10px",textTransform:"lowercase"},children:["error: ",p.message]})]})]})})},w=()=>{let{products:e,loading:t,error:o}=u(),{openCart:n,cartCount:s}=(0,g.f)();return t?(0,r.jsx)("p",{children:"loading products..."}):o?(0,r.jsxs)("p",{children:["error fetching products: ",o.message||"unknown error"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:"Shop | WMCYN"}),(0,r.jsx)("meta",{name:"description",content:"Shop WMCYN's exclusive merchandise."})]}),(0,r.jsxs)("div",{style:{paddingTop:"20px"},children:[" ",(0,r.jsx)("div",{style:{position:"relative",display:"inline-block",width:"100%",textAlign:"right",paddingRight:"20px",marginBottom:"10px"},children:(0,r.jsxs)("button",{onClick:n,style:{background:"transparent",border:"none",cursor:"pointer",padding:"10px",fontSize:"1.5rem",color:"#333"},"aria-label":"open cart",children:[(0,r.jsx)(y.G,{icon:b.Diu,size:"lg"}),s>0&&(0,r.jsx)("span",{style:{position:"absolute",top:"0px",right:"0px",background:"red",color:"white",borderRadius:"50%",padding:"2px 6px",fontSize:"0.75rem",fontWeight:"bold",minWidth:"20px",textAlign:"center"},children:s})]})}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)("h1",{children:"friends and family"}),(0,r.jsxs)("p",{style:{textAlign:"center",maxWidth:"600px",margin:"20px 0"},children:["welcome fam",(0,r.jsx)("br",{}),"scan to see your product come alive"]}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:e.length>0?e.map(e=>(0,r.jsx)(m,{product:e},e.id.toString())):(0,r.jsx)("p",{children:"no products found."})})]})]}),(0,r.jsx)(v,{})," "]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[976,822,338,888,774,179],()=>t(7443)),_N_E=e.O()}]);