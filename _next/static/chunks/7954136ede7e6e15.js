(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15125,(e,a,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var t={VALID_LOADERS:function(){return i},imageConfigDefault:function(){return l}};for(var n in t)Object.defineProperty(s,n,{enumerable:!0,get:t[n]});let i=["default","imgix","cloudinary","akamai","custom"],l={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},13521,(e,a,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ImageConfigContext",{enumerable:!0,get:function(){return i}});let t=e.r(41705)._(e.r(91788)),n=e.r(15125),i=t.default.createContext(n.imageConfigDefault)},41258,e=>{"use strict";var a=e.i(91398),s=e.i(91788),t=e.i(3828),n=e.i(44054),i=e.i(36613),l=e.i(32750),r=e.i(77934);function d(){let{isAuthenticated:e,loading:d}=(0,n.useAdminAuth)(),o=(0,t.useRouter)(),[c,u]=(0,s.useState)([]),[m,h]=(0,s.useState)(!0),[f,p]=(0,s.useState)(null),[j,x]=(0,s.useState)(""),[g,N]=(0,s.useState)("all");(0,s.useEffect)(()=>{d||e||o.push("/admin/login")},[e,d,o]),(0,s.useEffect)(()=>{e&&v()},[e]);let v=async()=>{try{h(!0),p(null);let e=await i.arSessions.list();console.log("[ARSessionsList] API response:",e);let a=Array.isArray(e)?e:e?.arSessions||e?.sessions||[];u(a)}catch(e){console.error("failed to load ar sessions:",e),p(e.message||"failed to load ar sessions"),u([])}finally{h(!1)}},C=()=>{o.push("/admin/ar-sessions/new")},y=async(e,a)=>{if(confirm(`are you sure you want to delete "${a}"? this action cannot be undone.`))try{await i.arSessions.delete(e),u((c||[]).filter(a=>(a.sessionId||a.id)!==e))}catch(e){console.error("failed to delete ar session:",e),alert("failed to delete ar session: "+(e.message||"unknown error"))}},b=(c||[]).filter(e=>{if(!e||!e.metadata)return!1;let a=e.metadata.title||"",s=e.metadata.description||"",t=e.campaign||"",n=a.toLowerCase().includes(j.toLowerCase())||s.toLowerCase().includes(j.toLowerCase())||t.toLowerCase().includes(j.toLowerCase()),i="all"===g||e.status===g;return n&&i}),w=b.reduce((e,a)=>{let s=a.campaign||"no campaign";return e[s]||(e[s]=[]),e[s].push(a),e},{});return d?(0,a.jsx)("div",{className:r.default.adminPageContainer,children:(0,a.jsx)("div",{className:r.default.adminContainer,children:(0,a.jsx)("div",{className:r.default.loadingContainer,children:"loading..."})})}):e?(0,a.jsx)("div",{className:r.default.adminPageContainer,children:(0,a.jsxs)("div",{className:r.default.adminContainer,children:[(0,a.jsxs)("div",{className:r.default.adminHeader,children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,a.jsx)(l.default,{src:"/wmcyn_logo_white.png",alt:"WMCYN Logo",width:80,height:40,priority:!0}),(0,a.jsx)("h1",{className:r.default.adminTitle,children:"Admin Dashboard"})]}),(0,a.jsx)("div",{className:r.default.adminActions,children:(0,a.jsx)("button",{onClick:C,className:r.default.buttonPrimary,children:"Create AR Session"})})]}),(0,a.jsxs)("div",{className:r.default.adminTabs,children:[(0,a.jsx)("button",{className:r.default.tabButton,onClick:()=>o.push("/admin"),children:"AR Products"}),(0,a.jsx)("button",{className:`${r.default.tabButton} ${r.default.active}`,onClick:()=>o.push("/admin/ar-sessions"),children:"AR Sessions"})]}),(0,a.jsxs)("div",{className:r.default.searchContainer,children:[(0,a.jsx)("input",{type:"text",placeholder:"Search sessions...",value:j,onChange:e=>x(e.target.value),className:r.default.searchInput}),(0,a.jsxs)("select",{value:g,onChange:e=>N(e.target.value),className:r.default.filterSelect,children:[(0,a.jsx)("option",{value:"all",children:"All Statuses"}),(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"inactive",children:"Inactive"}),(0,a.jsx)("option",{value:"draft",children:"Draft"})]})]}),m?(0,a.jsx)("div",{className:r.default.loadingContainer,children:"loading ar sessions..."}):f?(0,a.jsxs)("div",{className:r.default.errorContainer,children:[(0,a.jsx)("h3",{children:"error loading ar sessions"}),(0,a.jsx)("p",{children:f}),(0,a.jsx)("button",{onClick:v,className:r.default.button,children:"try again"})]}):0===b.length?(0,a.jsxs)("div",{className:r.default.emptyState,children:[(0,a.jsx)("h2",{className:r.default.emptyStateTitle,children:j||"all"!==g?"No matching AR sessions":"No AR sessions yet"}),(0,a.jsx)("p",{className:r.default.emptyStateDescription,children:j||"all"!==g?"Try adjusting your search or filters":"Create your first AR session to get started"}),!j&&"all"===g&&(0,a.jsx)("button",{onClick:C,className:r.default.buttonPrimary,children:"Create AR Session"})]}):(0,a.jsx)("div",{className:r.default.sessionsContainer,children:Object.entries(w).map(([e,s])=>(0,a.jsxs)("div",{className:r.default.campaignSection,children:[(0,a.jsxs)("h2",{className:r.default.campaignTitle,children:[e," (",s.length,")"]}),(0,a.jsx)("div",{className:r.default.sessionsGrid,children:s.map(e=>{let s=e.sessionId||e.id||"",t=e.metadata?.title||e.name||"untitled",n=e.metadata?.description||"";return(0,a.jsxs)("div",{className:r.default.sessionCard,children:[(0,a.jsxs)("div",{className:r.default.sessionHeader,children:[(0,a.jsx)("h3",{className:r.default.sessionTitle,children:t}),(0,a.jsx)("span",{className:`${r.default.statusBadge} ${r.default[e.status]}`,children:e.status})]}),(0,a.jsx)("p",{className:r.default.sessionDescription,children:n}),(0,a.jsxs)("div",{className:r.default.sessionMeta,children:[(0,a.jsxs)("div",{className:r.default.metaRow,children:[(0,a.jsx)("span",{className:r.default.metaLabel,children:"marker:"}),(0,a.jsx)("span",{className:r.default.metaValue,children:e.markerPattern?.name||e.markerPattern?.patternId||e.markerPattern?.type||"custom"})]}),(0,a.jsxs)("div",{className:r.default.metaRow,children:[(0,a.jsx)("span",{className:r.default.metaLabel,children:"created:"}),(0,a.jsx)("span",{className:r.default.metaValue,children:new Date(e.createdAt).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:r.default.metaRow,children:[(0,a.jsx)("span",{className:r.default.metaLabel,children:"actions:"}),(0,a.jsxs)("span",{className:r.default.metaValue,children:[e.metadata?.actions?.length||0," configured"]})]})]}),(0,a.jsxs)("div",{className:r.default.sessionActions,children:[(0,a.jsx)("button",{onClick:()=>{o.push(`/admin/ar-sessions/${s}`)},className:r.default.actionButton,children:"edit"}),(0,a.jsx)("button",{onClick:()=>{o.push(`/admin/ar-sessions/${s}?generateQR=true`)},className:r.default.actionButton,children:"generate qr"}),(0,a.jsx)("button",{onClick:()=>y(s,t),className:`${r.default.actionButton} ${r.default.dangerButton}`,children:"delete"})]})]},s)})})]},e))})]})}):null}e.s(["default",()=>d])},26031,(e,a,s)=>{let t="/admin/ar-sessions";(window.__NEXT_P=window.__NEXT_P||[]).push([t,()=>e.r(41258)]),a.hot&&a.hot.dispose(function(){window.__NEXT_P.push([t])})},48761,e=>{e.v(a=>Promise.all(["static/chunks/fd7c0943d5cd5e09.js"].map(a=>e.l(a))).then(()=>a(93594)))},28805,e=>{e.v(a=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(a=>e.l(a))).then(()=>a(79466)))}]);